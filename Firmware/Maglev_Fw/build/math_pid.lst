ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"math_pid.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Libraries/ctrl_sdk/src/math_pid.c"
  18              		.section	.text.math_pid_init,"ax",%progbits
  19              		.align	1
  20              		.global	math_pid_init
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	math_pid_init:
  26              	.LVL0:
  27              	.LFB0:
   1:Libraries/ctrl_sdk/src/math_pid.c **** #include <string.h>
   2:Libraries/ctrl_sdk/src/math_pid.c **** #include <stdbool.h>
   3:Libraries/ctrl_sdk/src/math_pid.c **** #include "math_pid.h"
   4:Libraries/ctrl_sdk/src/math_pid.c **** 
   5:Libraries/ctrl_sdk/src/math_pid.c **** void math_pid_init(math_pid_t *pid, float kp, float ki, float kd)
   6:Libraries/ctrl_sdk/src/math_pid.c **** {
  28              		.loc 1 6 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
   7:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid == NULL) {
  33              		.loc 1 7 2 view .LVU1
  34              		.loc 1 7 5 is_stmt 0 view .LVU2
  35 0000 10B1     		cbz	r0, .L1
   8:Libraries/ctrl_sdk/src/math_pid.c **** 		return;
   9:Libraries/ctrl_sdk/src/math_pid.c **** 	}
  10:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->kp = kp;
  36              		.loc 1 10 2 is_stmt 1 view .LVU3
  37              		.loc 1 10 10 is_stmt 0 view .LVU4
  38 0002 0160     		str	r1, [r0]	@ float
  11:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->ki = ki;
  39              		.loc 1 11 2 is_stmt 1 view .LVU5
  40              		.loc 1 11 10 is_stmt 0 view .LVU6
  41 0004 4260     		str	r2, [r0, #4]	@ float
  12:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->kd = kd;
  42              		.loc 1 12 2 is_stmt 1 view .LVU7
  43              		.loc 1 12 10 is_stmt 0 view .LVU8
  44 0006 8360     		str	r3, [r0, #8]	@ float
  45              	.L1:
  13:Libraries/ctrl_sdk/src/math_pid.c **** }
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 2


  46              		.loc 1 13 1 view .LVU9
  47 0008 7047     		bx	lr
  48              		.cfi_endproc
  49              	.LFE0:
  51              		.section	.text.math_pid_clear,"ax",%progbits
  52              		.align	1
  53              		.global	math_pid_clear
  54              		.syntax unified
  55              		.thumb
  56              		.thumb_func
  58              	math_pid_clear:
  59              	.LVL1:
  60              	.LFB1:
  14:Libraries/ctrl_sdk/src/math_pid.c **** 
  15:Libraries/ctrl_sdk/src/math_pid.c **** void math_pid_clear(math_pid_t *pid, bool mod)
  16:Libraries/ctrl_sdk/src/math_pid.c **** {
  61              		.loc 1 16 1 is_stmt 1 view -0
  62              		.cfi_startproc
  63              		@ args = 0, pretend = 0, frame = 0
  64              		@ frame_needed = 0, uses_anonymous_args = 0
  17:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid == NULL) {
  65              		.loc 1 17 2 view .LVU11
  66              		.loc 1 17 5 is_stmt 0 view .LVU12
  67 0000 88B1     		cbz	r0, .L7
  16:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid == NULL) {
  68              		.loc 1 16 1 view .LVU13
  69 0002 08B5     		push	{r3, lr}
  70              	.LCFI0:
  71              		.cfi_def_cfa_offset 8
  72              		.cfi_offset 3, -8
  73              		.cfi_offset 14, -4
  18:Libraries/ctrl_sdk/src/math_pid.c **** 		return;
  19:Libraries/ctrl_sdk/src/math_pid.c **** 	}
  20:Libraries/ctrl_sdk/src/math_pid.c **** 
  21:Libraries/ctrl_sdk/src/math_pid.c **** 	if (mod == 1) {
  74              		.loc 1 21 2 is_stmt 1 view .LVU14
  75              		.loc 1 21 5 is_stmt 0 view .LVU15
  76 0004 51B9     		cbnz	r1, .L10
  22:Libraries/ctrl_sdk/src/math_pid.c **** 		memset(pid, 0, sizeof(math_pid_t));
  23:Libraries/ctrl_sdk/src/math_pid.c **** 	} else {
  24:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->op = 0; // KP输出
  77              		.loc 1 24 3 is_stmt 1 view .LVU16
  78              		.loc 1 24 11 is_stmt 0 view .LVU17
  79 0006 0022     		movs	r2, #0
  80 0008 C260     		str	r2, [r0, #12]	@ float
  25:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->oi = 0; // KI输出
  81              		.loc 1 25 3 is_stmt 1 view .LVU18
  82              		.loc 1 25 11 is_stmt 0 view .LVU19
  83 000a 0261     		str	r2, [r0, #16]	@ float
  26:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->od = 0; // KD输出
  84              		.loc 1 26 3 is_stmt 1 view .LVU20
  85              		.loc 1 26 11 is_stmt 0 view .LVU21
  86 000c 4261     		str	r2, [r0, #20]	@ float
  27:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->out = 0; // pInt32_t
  87              		.loc 1 27 3 is_stmt 1 view .LVU22
  88              		.loc 1 27 12 is_stmt 0 view .LVU23
  89 000e 8261     		str	r2, [r0, #24]	@ float
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 3


  28:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->integrator = 0; // 积分值
  90              		.loc 1 28 3 is_stmt 1 view .LVU24
  91              		.loc 1 28 19 is_stmt 0 view .LVU25
  92 0010 4262     		str	r2, [r0, #36]	@ float
  29:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->last_error = 0; // 上次误差
  93              		.loc 1 29 3 is_stmt 1 view .LVU26
  94              		.loc 1 29 19 is_stmt 0 view .LVU27
  95 0012 C262     		str	r2, [r0, #44]	@ float
  30:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->last_derivative = 0; // 上次误差与上上次误差之差
  96              		.loc 1 30 3 is_stmt 1 view .LVU28
  97              		.loc 1 30 24 is_stmt 0 view .LVU29
  98 0014 0263     		str	r2, [r0, #48]	@ float
  31:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->last_time = 0; // 上次时间
  99              		.loc 1 31 3 is_stmt 1 view .LVU30
 100              		.loc 1 31 18 is_stmt 0 view .LVU31
 101 0016 0022     		movs	r2, #0
 102 0018 4263     		str	r2, [r0, #52]
 103              	.LVL2:
 104              	.L3:
  32:Libraries/ctrl_sdk/src/math_pid.c **** 	}
  33:Libraries/ctrl_sdk/src/math_pid.c **** }
 105              		.loc 1 33 1 view .LVU32
 106 001a 08BD     		pop	{r3, pc}
 107              	.LVL3:
 108              	.L10:
  22:Libraries/ctrl_sdk/src/math_pid.c **** 	} else {
 109              		.loc 1 22 3 is_stmt 1 view .LVU33
 110 001c 3822     		movs	r2, #56
 111 001e 0021     		movs	r1, #0
 112              	.LVL4:
  22:Libraries/ctrl_sdk/src/math_pid.c **** 	} else {
 113              		.loc 1 22 3 is_stmt 0 view .LVU34
 114 0020 FFF7FEFF 		bl	memset
 115              	.LVL5:
  22:Libraries/ctrl_sdk/src/math_pid.c **** 	} else {
 116              		.loc 1 22 3 view .LVU35
 117 0024 F9E7     		b	.L3
 118              	.LVL6:
 119              	.L7:
 120              	.LCFI1:
 121              		.cfi_def_cfa_offset 0
 122              		.cfi_restore 3
 123              		.cfi_restore 14
  22:Libraries/ctrl_sdk/src/math_pid.c **** 	} else {
 124              		.loc 1 22 3 view .LVU36
 125 0026 7047     		bx	lr
 126              		.cfi_endproc
 127              	.LFE1:
 129              		.global	__aeabi_fadd
 130              		.global	__aeabi_fcmpeq
 131              		.global	__aeabi_fcmplt
 132              		.global	__aeabi_fcmpgt
 133              		.global	__aeabi_fmul
 134              		.global	__aeabi_fsub
 135              		.section	.text.math_pid_loc,"ax",%progbits
 136              		.align	1
 137              		.global	math_pid_loc
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 4


 138              		.syntax unified
 139              		.thumb
 140              		.thumb_func
 142              	math_pid_loc:
 143              	.LVL7:
 144              	.LFB2:
  34:Libraries/ctrl_sdk/src/math_pid.c **** 
  35:Libraries/ctrl_sdk/src/math_pid.c **** /**
  36:Libraries/ctrl_sdk/src/math_pid.c ****  * @brief  pid位置式控制器输出
  37:Libraries/ctrl_sdk/src/math_pid.c ****  * @param  pid     pid参数
  38:Libraries/ctrl_sdk/src/math_pid.c ****  * @param  error   pid输入误差
  39:Libraries/ctrl_sdk/src/math_pid.c ****  * @retval PID输出结果
  40:Libraries/ctrl_sdk/src/math_pid.c ****  */
  41:Libraries/ctrl_sdk/src/math_pid.c **** float math_pid_loc(math_pid_t *pid, float error)
  42:Libraries/ctrl_sdk/src/math_pid.c **** {
 145              		.loc 1 42 1 is_stmt 1 view -0
 146              		.cfi_startproc
 147              		@ args = 0, pretend = 0, frame = 0
 148              		@ frame_needed = 0, uses_anonymous_args = 0
  43:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid == NULL) {
 149              		.loc 1 43 2 view .LVU38
 150              		.loc 1 43 5 is_stmt 0 view .LVU39
 151 0000 0028     		cmp	r0, #0
 152 0002 5DD0     		beq	.L22
  42:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid == NULL) {
 153              		.loc 1 42 1 view .LVU40
 154 0004 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 155              	.LCFI2:
 156              		.cfi_def_cfa_offset 24
 157              		.cfi_offset 4, -24
 158              		.cfi_offset 5, -20
 159              		.cfi_offset 6, -16
 160              		.cfi_offset 7, -12
 161              		.cfi_offset 8, -8
 162              		.cfi_offset 14, -4
 163 0008 0D46     		mov	r5, r1
 164 000a 0446     		mov	r4, r0
  44:Libraries/ctrl_sdk/src/math_pid.c **** 		return 0;
  45:Libraries/ctrl_sdk/src/math_pid.c **** 	}
  46:Libraries/ctrl_sdk/src/math_pid.c **** 	/* 累积误差 */
  47:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->integrator += error;
 165              		.loc 1 47 2 is_stmt 1 view .LVU41
 166              		.loc 1 47 18 is_stmt 0 view .LVU42
 167 000c 406A     		ldr	r0, [r0, #36]	@ float
 168              	.LVL8:
 169              		.loc 1 47 18 view .LVU43
 170 000e FFF7FEFF 		bl	__aeabi_fadd
 171              	.LVL9:
 172              		.loc 1 47 18 view .LVU44
 173 0012 0646     		mov	r6, r0
 174 0014 6062     		str	r0, [r4, #36]	@ float
  48:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid->Integrator_max != 0) {
 175              		.loc 1 48 2 is_stmt 1 view .LVU45
 176              		.loc 1 48 9 is_stmt 0 view .LVU46
 177 0016 A76A     		ldr	r7, [r4, #40]	@ float
 178              		.loc 1 48 5 view .LVU47
 179 0018 0021     		movs	r1, #0
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 5


 180 001a 3846     		mov	r0, r7
 181 001c FFF7FEFF 		bl	__aeabi_fcmpeq
 182              	.LVL10:
 183 0020 78B9     		cbnz	r0, .L13
  49:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->integrator = DEF_CONSTRAIN(pid->integrator,
 184              		.loc 1 49 3 is_stmt 1 view .LVU48
 185              		.loc 1 49 21 is_stmt 0 view .LVU49
 186 0022 07F10048 		add	r8, r7, #-2147483648
 187 0026 4146     		mov	r1, r8
 188 0028 3046     		mov	r0, r6
 189 002a FFF7FEFF 		bl	__aeabi_fcmplt
 190              	.LVL11:
 191 002e 30B9     		cbnz	r0, .L15
 192              		.loc 1 49 21 discriminator 2 view .LVU50
 193 0030 3946     		mov	r1, r7
 194 0032 3046     		mov	r0, r6
 195 0034 FFF7FEFF 		bl	__aeabi_fcmpgt
 196              	.LVL12:
 197 0038 0028     		cmp	r0, #0
 198 003a 3FD0     		beq	.L27
 199              		.loc 1 49 21 view .LVU51
 200 003c B846     		mov	r8, r7
 201              	.L15:
 202              		.loc 1 49 19 discriminator 8 view .LVU52
 203 003e C4F82480 		str	r8, [r4, #36]	@ float
 204              	.L13:
  50:Libraries/ctrl_sdk/src/math_pid.c **** 						-pid->Integrator_max,
  51:Libraries/ctrl_sdk/src/math_pid.c **** 						pid->Integrator_max);
  52:Libraries/ctrl_sdk/src/math_pid.c **** 	}
  53:Libraries/ctrl_sdk/src/math_pid.c **** 
  54:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->op = (float)(pid->kp * (float)error);
 205              		.loc 1 54 2 is_stmt 1 view .LVU53
 206              		.loc 1 54 12 is_stmt 0 view .LVU54
 207 0042 2946     		mov	r1, r5
 208 0044 2068     		ldr	r0, [r4]	@ float
 209 0046 FFF7FEFF 		bl	__aeabi_fmul
 210              	.LVL13:
 211 004a 0746     		mov	r7, r0
 212              		.loc 1 54 10 view .LVU55
 213 004c E060     		str	r0, [r4, #12]	@ float
  55:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->oi = (float)(pid->ki * (float)pid->integrator);
 214              		.loc 1 55 2 is_stmt 1 view .LVU56
 215              		.loc 1 55 12 is_stmt 0 view .LVU57
 216 004e 616A     		ldr	r1, [r4, #36]	@ float
 217 0050 6068     		ldr	r0, [r4, #4]	@ float
 218 0052 FFF7FEFF 		bl	__aeabi_fmul
 219              	.LVL14:
 220 0056 8046     		mov	r8, r0
 221              		.loc 1 55 10 view .LVU58
 222 0058 2061     		str	r0, [r4, #16]	@ float
  56:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->od = (float)(pid->kd * (float)(error - pid->last_error));
 223              		.loc 1 56 2 is_stmt 1 view .LVU59
 224              		.loc 1 56 23 is_stmt 0 view .LVU60
 225 005a A668     		ldr	r6, [r4, #8]	@ float
 226              		.loc 1 56 30 view .LVU61
 227 005c E16A     		ldr	r1, [r4, #44]	@ float
 228 005e 2846     		mov	r0, r5
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 6


 229 0060 FFF7FEFF 		bl	__aeabi_fsub
 230              	.LVL15:
 231 0064 0146     		mov	r1, r0
 232              		.loc 1 56 12 view .LVU62
 233 0066 3046     		mov	r0, r6
 234 0068 FFF7FEFF 		bl	__aeabi_fmul
 235              	.LVL16:
 236 006c 0646     		mov	r6, r0
 237              		.loc 1 56 10 view .LVU63
 238 006e 6061     		str	r0, [r4, #20]	@ float
  57:Libraries/ctrl_sdk/src/math_pid.c **** 
  58:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->last_error = error;
 239              		.loc 1 58 2 is_stmt 1 view .LVU64
 240              		.loc 1 58 18 is_stmt 0 view .LVU65
 241 0070 E562     		str	r5, [r4, #44]	@ float
  59:Libraries/ctrl_sdk/src/math_pid.c **** 
  60:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->out = pid->op + pid->oi + pid->od;
 242              		.loc 1 60 2 is_stmt 1 view .LVU66
 243              		.loc 1 60 21 is_stmt 0 view .LVU67
 244 0072 4146     		mov	r1, r8
 245 0074 3846     		mov	r0, r7
 246 0076 FFF7FEFF 		bl	__aeabi_fadd
 247              	.LVL17:
 248 007a 0146     		mov	r1, r0
 249              		.loc 1 60 31 view .LVU68
 250 007c 3046     		mov	r0, r6
 251 007e FFF7FEFF 		bl	__aeabi_fadd
 252              	.LVL18:
 253 0082 0546     		mov	r5, r0
 254              	.LVL19:
 255              		.loc 1 60 11 view .LVU69
 256 0084 A061     		str	r0, [r4, #24]	@ float
  61:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid->out_min != 0 || pid->out_max != 0) {
 257              		.loc 1 61 2 is_stmt 1 view .LVU70
 258              		.loc 1 61 9 is_stmt 0 view .LVU71
 259 0086 E669     		ldr	r6, [r4, #28]	@ float
 260              		.loc 1 61 5 view .LVU72
 261 0088 0021     		movs	r1, #0
 262 008a 3046     		mov	r0, r6
 263 008c FFF7FEFF 		bl	__aeabi_fcmpeq
 264              	.LVL20:
 265 0090 20B1     		cbz	r0, .L17
 266              		.loc 1 61 24 discriminator 1 view .LVU73
 267 0092 0021     		movs	r1, #0
 268 0094 206A     		ldr	r0, [r4, #32]	@ float
 269 0096 FFF7FEFF 		bl	__aeabi_fcmpeq
 270              	.LVL21:
 271 009a 60B9     		cbnz	r0, .L18
 272              	.L17:
  62:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->out = DEF_CONSTRAIN(pid->out, pid->out_min, pid->out_max);
 273              		.loc 1 62 3 is_stmt 1 view .LVU74
 274              		.loc 1 62 14 is_stmt 0 view .LVU75
 275 009c 3146     		mov	r1, r6
 276 009e 2846     		mov	r0, r5
 277 00a0 FFF7FEFF 		bl	__aeabi_fcmplt
 278              	.LVL22:
 279 00a4 30B9     		cbnz	r0, .L20
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 7


 280              		.loc 1 62 14 discriminator 2 view .LVU76
 281 00a6 266A     		ldr	r6, [r4, #32]	@ float
 282 00a8 3146     		mov	r1, r6
 283 00aa 2846     		mov	r0, r5
 284 00ac FFF7FEFF 		bl	__aeabi_fcmpgt
 285              	.LVL23:
 286 00b0 00B9     		cbnz	r0, .L20
 287 00b2 2E46     		mov	r6, r5
 288              	.L20:
 289              		.loc 1 62 12 discriminator 8 view .LVU77
 290 00b4 A661     		str	r6, [r4, #24]	@ float
 291              	.L18:
  63:Libraries/ctrl_sdk/src/math_pid.c **** 	}
  64:Libraries/ctrl_sdk/src/math_pid.c **** 	return pid->out;
 292              		.loc 1 64 2 is_stmt 1 view .LVU78
 293              		.loc 1 64 12 is_stmt 0 view .LVU79
 294 00b6 A069     		ldr	r0, [r4, #24]	@ float
  65:Libraries/ctrl_sdk/src/math_pid.c **** }
 295              		.loc 1 65 1 view .LVU80
 296 00b8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 297              	.LVL24:
 298              	.L27:
  49:Libraries/ctrl_sdk/src/math_pid.c **** 						-pid->Integrator_max,
 299              		.loc 1 49 21 view .LVU81
 300 00bc B046     		mov	r8, r6
 301 00be BEE7     		b	.L15
 302              	.LVL25:
 303              	.L22:
 304              	.LCFI3:
 305              		.cfi_def_cfa_offset 0
 306              		.cfi_restore 4
 307              		.cfi_restore 5
 308              		.cfi_restore 6
 309              		.cfi_restore 7
 310              		.cfi_restore 8
 311              		.cfi_restore 14
  44:Libraries/ctrl_sdk/src/math_pid.c **** 	}
 312              		.loc 1 44 10 view .LVU82
 313 00c0 0020     		movs	r0, #0
 314              	.LVL26:
 315              		.loc 1 65 1 view .LVU83
 316 00c2 7047     		bx	lr
 317              		.cfi_endproc
 318              	.LFE2:
 320              		.section	.text.math_pid_inc,"ax",%progbits
 321              		.align	1
 322              		.global	math_pid_inc
 323              		.syntax unified
 324              		.thumb
 325              		.thumb_func
 327              	math_pid_inc:
 328              	.LVL27:
 329              	.LFB3:
  66:Libraries/ctrl_sdk/src/math_pid.c **** 
  67:Libraries/ctrl_sdk/src/math_pid.c **** /**
  68:Libraries/ctrl_sdk/src/math_pid.c ****  * @brief  pid增量式控制器输出
  69:Libraries/ctrl_sdk/src/math_pid.c ****  * @param  pid     pid参数
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 8


  70:Libraries/ctrl_sdk/src/math_pid.c ****  * @param  error   pid输入误差
  71:Libraries/ctrl_sdk/src/math_pid.c ****  * @note   注意输出结果已经包涵了上次结果
  72:Libraries/ctrl_sdk/src/math_pid.c ****  * @retval PID输出结果
  73:Libraries/ctrl_sdk/src/math_pid.c ****  */
  74:Libraries/ctrl_sdk/src/math_pid.c **** float math_pid_inc(math_pid_t *pid, float error)
  75:Libraries/ctrl_sdk/src/math_pid.c **** {
 330              		.loc 1 75 1 is_stmt 1 view -0
 331              		.cfi_startproc
 332              		@ args = 0, pretend = 0, frame = 0
 333              		@ frame_needed = 0, uses_anonymous_args = 0
  76:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid == NULL) {
 334              		.loc 1 76 2 view .LVU85
 335              		.loc 1 76 5 is_stmt 0 view .LVU86
 336 0000 0028     		cmp	r0, #0
 337 0002 4CD0     		beq	.L39
  75:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid == NULL) {
 338              		.loc 1 75 1 view .LVU87
 339 0004 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 340              	.LCFI4:
 341              		.cfi_def_cfa_offset 32
 342              		.cfi_offset 3, -32
 343              		.cfi_offset 4, -28
 344              		.cfi_offset 5, -24
 345              		.cfi_offset 6, -20
 346              		.cfi_offset 7, -16
 347              		.cfi_offset 8, -12
 348              		.cfi_offset 9, -8
 349              		.cfi_offset 14, -4
 350 0008 0D46     		mov	r5, r1
 351 000a 0446     		mov	r4, r0
  77:Libraries/ctrl_sdk/src/math_pid.c **** 		return 0;
  78:Libraries/ctrl_sdk/src/math_pid.c **** 	}
  79:Libraries/ctrl_sdk/src/math_pid.c **** 
  80:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->op = (float)(pid->kp * (float)(error - pid->last_error));
 352              		.loc 1 80 2 is_stmt 1 view .LVU88
 353              		.loc 1 80 23 is_stmt 0 view .LVU89
 354 000c 0768     		ldr	r7, [r0]	@ float
 355              		.loc 1 80 30 view .LVU90
 356 000e C16A     		ldr	r1, [r0, #44]	@ float
 357              	.LVL28:
 358              		.loc 1 80 30 view .LVU91
 359 0010 2846     		mov	r0, r5
 360              	.LVL29:
 361              		.loc 1 80 30 view .LVU92
 362 0012 FFF7FEFF 		bl	__aeabi_fsub
 363              	.LVL30:
 364 0016 0646     		mov	r6, r0
 365              		.loc 1 80 12 view .LVU93
 366 0018 0146     		mov	r1, r0
 367 001a 3846     		mov	r0, r7
 368 001c FFF7FEFF 		bl	__aeabi_fmul
 369              	.LVL31:
 370 0020 8046     		mov	r8, r0
 371              		.loc 1 80 10 view .LVU94
 372 0022 E060     		str	r0, [r4, #12]	@ float
  81:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->oi = (float)(pid->ki * (float)error);
 373              		.loc 1 81 2 is_stmt 1 view .LVU95
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 9


 374              		.loc 1 81 12 is_stmt 0 view .LVU96
 375 0024 2946     		mov	r1, r5
 376 0026 6068     		ldr	r0, [r4, #4]	@ float
 377 0028 FFF7FEFF 		bl	__aeabi_fmul
 378              	.LVL32:
 379 002c 8146     		mov	r9, r0
 380              		.loc 1 81 10 view .LVU97
 381 002e 2061     		str	r0, [r4, #16]	@ float
  82:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->od = (float)(pid->kd * (float)((error - pid->last_error) -
 382              		.loc 1 82 2 is_stmt 1 view .LVU98
 383              		.loc 1 82 23 is_stmt 0 view .LVU99
 384 0030 A768     		ldr	r7, [r4, #8]	@ float
 385              		.loc 1 82 30 view .LVU100
 386 0032 216B     		ldr	r1, [r4, #48]	@ float
 387 0034 3046     		mov	r0, r6
 388 0036 FFF7FEFF 		bl	__aeabi_fsub
 389              	.LVL33:
 390 003a 0146     		mov	r1, r0
 391              		.loc 1 82 12 view .LVU101
 392 003c 3846     		mov	r0, r7
 393 003e FFF7FEFF 		bl	__aeabi_fmul
 394              	.LVL34:
 395 0042 0746     		mov	r7, r0
 396              		.loc 1 82 10 view .LVU102
 397 0044 6061     		str	r0, [r4, #20]	@ float
  83:Libraries/ctrl_sdk/src/math_pid.c **** 					    pid->last_derivative));
  84:Libraries/ctrl_sdk/src/math_pid.c **** 
  85:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->last_derivative = error - pid->last_error;
 398              		.loc 1 85 2 is_stmt 1 view .LVU103
 399              		.loc 1 85 23 is_stmt 0 view .LVU104
 400 0046 2663     		str	r6, [r4, #48]	@ float
  86:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->last_error = error;
 401              		.loc 1 86 2 is_stmt 1 view .LVU105
 402              		.loc 1 86 18 is_stmt 0 view .LVU106
 403 0048 E562     		str	r5, [r4, #44]	@ float
  87:Libraries/ctrl_sdk/src/math_pid.c **** 
  88:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->out += pid->op + pid->oi + pid->od;
 404              		.loc 1 88 2 is_stmt 1 view .LVU107
 405              		.loc 1 88 5 is_stmt 0 view .LVU108
 406 004a A569     		ldr	r5, [r4, #24]	@ float
 407              	.LVL35:
 408              		.loc 1 88 22 view .LVU109
 409 004c 4946     		mov	r1, r9
 410 004e 4046     		mov	r0, r8
 411 0050 FFF7FEFF 		bl	__aeabi_fadd
 412              	.LVL36:
 413              		.loc 1 88 22 view .LVU110
 414 0054 0146     		mov	r1, r0
 415              		.loc 1 88 32 view .LVU111
 416 0056 3846     		mov	r0, r7
 417 0058 FFF7FEFF 		bl	__aeabi_fadd
 418              	.LVL37:
 419 005c 0146     		mov	r1, r0
 420              		.loc 1 88 11 view .LVU112
 421 005e 2846     		mov	r0, r5
 422 0060 FFF7FEFF 		bl	__aeabi_fadd
 423              	.LVL38:
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 10


 424 0064 0546     		mov	r5, r0
 425 0066 A061     		str	r0, [r4, #24]	@ float
  89:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid->out_min != 0 || pid->out_max != 0) {
 426              		.loc 1 89 2 is_stmt 1 view .LVU113
 427              		.loc 1 89 9 is_stmt 0 view .LVU114
 428 0068 E669     		ldr	r6, [r4, #28]	@ float
 429              		.loc 1 89 5 view .LVU115
 430 006a 0021     		movs	r1, #0
 431 006c 3046     		mov	r0, r6
 432 006e FFF7FEFF 		bl	__aeabi_fcmpeq
 433              	.LVL39:
 434 0072 20B1     		cbz	r0, .L34
 435              		.loc 1 89 24 discriminator 1 view .LVU116
 436 0074 0021     		movs	r1, #0
 437 0076 206A     		ldr	r0, [r4, #32]	@ float
 438 0078 FFF7FEFF 		bl	__aeabi_fcmpeq
 439              	.LVL40:
 440 007c 60B9     		cbnz	r0, .L35
 441              	.L34:
  90:Libraries/ctrl_sdk/src/math_pid.c **** 		pid->out = DEF_CONSTRAIN(pid->out, pid->out_min, pid->out_max);
 442              		.loc 1 90 3 is_stmt 1 view .LVU117
 443              		.loc 1 90 14 is_stmt 0 view .LVU118
 444 007e 3146     		mov	r1, r6
 445 0080 2846     		mov	r0, r5
 446 0082 FFF7FEFF 		bl	__aeabi_fcmplt
 447              	.LVL41:
 448 0086 30B9     		cbnz	r0, .L37
 449              		.loc 1 90 14 discriminator 2 view .LVU119
 450 0088 266A     		ldr	r6, [r4, #32]	@ float
 451 008a 3146     		mov	r1, r6
 452 008c 2846     		mov	r0, r5
 453 008e FFF7FEFF 		bl	__aeabi_fcmpgt
 454              	.LVL42:
 455 0092 00B9     		cbnz	r0, .L37
 456 0094 2E46     		mov	r6, r5
 457              	.L37:
 458              		.loc 1 90 12 discriminator 8 view .LVU120
 459 0096 A661     		str	r6, [r4, #24]	@ float
 460              	.L35:
  91:Libraries/ctrl_sdk/src/math_pid.c **** 	}
  92:Libraries/ctrl_sdk/src/math_pid.c **** 	return pid->out;
 461              		.loc 1 92 2 is_stmt 1 view .LVU121
 462              		.loc 1 92 12 is_stmt 0 view .LVU122
 463 0098 A069     		ldr	r0, [r4, #24]	@ float
  93:Libraries/ctrl_sdk/src/math_pid.c **** }
 464              		.loc 1 93 1 view .LVU123
 465 009a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 466              	.LVL43:
 467              	.L39:
 468              	.LCFI5:
 469              		.cfi_def_cfa_offset 0
 470              		.cfi_restore 3
 471              		.cfi_restore 4
 472              		.cfi_restore 5
 473              		.cfi_restore 6
 474              		.cfi_restore 7
 475              		.cfi_restore 8
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 11


 476              		.cfi_restore 9
 477              		.cfi_restore 14
  77:Libraries/ctrl_sdk/src/math_pid.c **** 	}
 478              		.loc 1 77 10 view .LVU124
 479 009e 0020     		movs	r0, #0
 480              	.LVL44:
 481              		.loc 1 93 1 view .LVU125
 482 00a0 7047     		bx	lr
 483              		.cfi_endproc
 484              	.LFE3:
 486              		.section	.text.math_pid_set_output_restrict,"ax",%progbits
 487              		.align	1
 488              		.global	math_pid_set_output_restrict
 489              		.syntax unified
 490              		.thumb
 491              		.thumb_func
 493              	math_pid_set_output_restrict:
 494              	.LVL45:
 495              	.LFB4:
  94:Libraries/ctrl_sdk/src/math_pid.c **** 
  95:Libraries/ctrl_sdk/src/math_pid.c **** void math_pid_set_output_restrict(math_pid_t *pid, float max, float min)
  96:Libraries/ctrl_sdk/src/math_pid.c **** {
 496              		.loc 1 96 1 is_stmt 1 view -0
 497              		.cfi_startproc
 498              		@ args = 0, pretend = 0, frame = 0
 499              		@ frame_needed = 0, uses_anonymous_args = 0
 500              		@ link register save eliminated.
  97:Libraries/ctrl_sdk/src/math_pid.c **** 	if (pid == NULL) {
 501              		.loc 1 97 2 view .LVU127
 502              		.loc 1 97 5 is_stmt 0 view .LVU128
 503 0000 08B1     		cbz	r0, .L45
  98:Libraries/ctrl_sdk/src/math_pid.c **** 		return;
  99:Libraries/ctrl_sdk/src/math_pid.c **** 	}
 100:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->out_max = max;
 504              		.loc 1 100 2 is_stmt 1 view .LVU129
 505              		.loc 1 100 15 is_stmt 0 view .LVU130
 506 0002 0162     		str	r1, [r0, #32]	@ float
 101:Libraries/ctrl_sdk/src/math_pid.c **** 	pid->out_min = min;
 507              		.loc 1 101 2 is_stmt 1 view .LVU131
 508              		.loc 1 101 15 is_stmt 0 view .LVU132
 509 0004 C261     		str	r2, [r0, #28]	@ float
 510              	.L45:
 102:Libraries/ctrl_sdk/src/math_pid.c **** }
 511              		.loc 1 102 1 view .LVU133
 512 0006 7047     		bx	lr
 513              		.cfi_endproc
 514              	.LFE4:
 516              		.text
 517              	.Letext0:
 518              		.file 2 "Libraries/ctrl_sdk/inc/math_pid.h"
 519              		.file 3 "d:\\_environment\\arm-gnu-toolchain\\lib\\gcc\\arm-none-eabi\\12.3.1\\include\\stddef.h"
 520              		.file 4 "d:\\_environment\\arm-gnu-toolchain\\arm-none-eabi\\include\\string.h"
 521              		.file 5 "<built-in>"
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s 			page 12


DEFINED SYMBOLS
                            *ABS*:00000000 math_pid.c
C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s:19     .text.math_pid_init:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s:25     .text.math_pid_init:00000000 math_pid_init
C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s:52     .text.math_pid_clear:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s:58     .text.math_pid_clear:00000000 math_pid_clear
C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s:136    .text.math_pid_loc:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s:142    .text.math_pid_loc:00000000 math_pid_loc
C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s:321    .text.math_pid_inc:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s:327    .text.math_pid_inc:00000000 math_pid_inc
C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s:487    .text.math_pid_set_output_restrict:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\ccmIjxxg.s:493    .text.math_pid_set_output_restrict:00000000 math_pid_set_output_restrict

UNDEFINED SYMBOLS
memset
__aeabi_fadd
__aeabi_fcmpeq
__aeabi_fcmplt
__aeabi_fcmpgt
__aeabi_fmul
__aeabi_fsub
