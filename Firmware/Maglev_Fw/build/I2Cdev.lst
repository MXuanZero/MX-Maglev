ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"I2Cdev.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Libraries/ctrl_drv/i2c/I2Cdev.c"
  18              		.section	.text.I2Cdev_readBytes,"ax",%progbits
  19              		.align	1
  20              		.global	I2Cdev_readBytes
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	I2Cdev_readBytes:
  26              	.LVL0:
  27              	.LFB123:
   1:Libraries/ctrl_drv/i2c/I2Cdev.c **** // I2Cdev library collection - Main I2C device class header file
   2:Libraries/ctrl_drv/i2c/I2Cdev.c **** // Abstracts bit and byte I2C R/W functions into a convenient class
   3:Libraries/ctrl_drv/i2c/I2Cdev.c **** // 6/9/2012 by Jeff Rowberg <jeff@rowberg.net>
   4:Libraries/ctrl_drv/i2c/I2Cdev.c **** // 03/28/2017 by Kamnev Yuriy <kamnev.u1969@gmail.com>
   5:Libraries/ctrl_drv/i2c/I2Cdev.c **** //
   6:Libraries/ctrl_drv/i2c/I2Cdev.c **** // Changelog:
   7:Libraries/ctrl_drv/i2c/I2Cdev.c **** //     2017-03-28 - ported to STM32 using Keil MDK Pack
   8:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
   9:Libraries/ctrl_drv/i2c/I2Cdev.c **** /* ============================================
  10:Libraries/ctrl_drv/i2c/I2Cdev.c **** I2Cdev device library code is placed under the MIT license
  11:Libraries/ctrl_drv/i2c/I2Cdev.c **** Copyright (c) 2013 Jeff Rowberg
  12:Libraries/ctrl_drv/i2c/I2Cdev.c **** Copyright (c) 2017 Kamnev Yuriy
  13:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  14:Libraries/ctrl_drv/i2c/I2Cdev.c **** Permission is hereby granted, free of charge, to any person obtaining a copy
  15:Libraries/ctrl_drv/i2c/I2Cdev.c **** of this software and associated documentation files (the "Software"), to deal
  16:Libraries/ctrl_drv/i2c/I2Cdev.c **** in the Software without restriction, including without limitation the rights
  17:Libraries/ctrl_drv/i2c/I2Cdev.c **** to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  18:Libraries/ctrl_drv/i2c/I2Cdev.c **** copies of the Software, and to permit persons to whom the Software is
  19:Libraries/ctrl_drv/i2c/I2Cdev.c **** furnished to do so, subject to the following conditions:
  20:Libraries/ctrl_drv/i2c/I2Cdev.c **** The above copyright notice and this permission notice shall be included in
  21:Libraries/ctrl_drv/i2c/I2Cdev.c **** all copies or substantial portions of the Software.
  22:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  23:Libraries/ctrl_drv/i2c/I2Cdev.c **** THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  24:Libraries/ctrl_drv/i2c/I2Cdev.c **** IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  25:Libraries/ctrl_drv/i2c/I2Cdev.c **** FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  26:Libraries/ctrl_drv/i2c/I2Cdev.c **** AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  27:Libraries/ctrl_drv/i2c/I2Cdev.c **** LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  28:Libraries/ctrl_drv/i2c/I2Cdev.c **** OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  29:Libraries/ctrl_drv/i2c/I2Cdev.c **** THE SOFTWARE.
  30:Libraries/ctrl_drv/i2c/I2Cdev.c **** ===============================================
  31:Libraries/ctrl_drv/i2c/I2Cdev.c **** */
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 2


  32:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  33:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  34:Libraries/ctrl_drv/i2c/I2Cdev.c **** #include "I2Cdev.h"
  35:Libraries/ctrl_drv/i2c/I2Cdev.c **** #include "i2c_soft_stm32.h"
  36:Libraries/ctrl_drv/i2c/I2Cdev.c **** #include <string.h>
  37:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  38:Libraries/ctrl_drv/i2c/I2Cdev.c **** #define i2c_transmit_ack(dev_addr, data, len) 	Soft_I2cMaster_TransmitAck(dev_addr, data, len)
  39:Libraries/ctrl_drv/i2c/I2Cdev.c **** #define i2c_transmit_nack(dev_addr, data, len) 	Soft_I2cMaster_TransmitNack(dev_addr, data, len)
  40:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  41:Libraries/ctrl_drv/i2c/I2Cdev.c **** #define i2c_receive_ack(dev_addr, data, len)
  42:Libraries/ctrl_drv/i2c/I2Cdev.c **** #define i2c_receive_nack(dev_addr, data, len) Soft_I2cMaster_ReceiveNack(dev_addr, data, len)
  43:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  44:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  45:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Read several byte from an 8-bit device register.
  46:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
  47:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register regAddr to read from
  48:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param len 		How many bytes to read
  49:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Buffer to save data into
  50:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of read operation (0 = success, <0 = error)
  51:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
  52:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t I2Cdev_readBytes(uint8_t dev_addr, uint8_t reg_addr, uint8_t len, uint8_t *data) {
  28              		.loc 1 52 89 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 52 89 is_stmt 0 view .LVU1
  33 0000 70B5     		push	{r4, r5, r6, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36              		.cfi_offset 4, -16
  37              		.cfi_offset 5, -12
  38              		.cfi_offset 6, -8
  39              		.cfi_offset 14, -4
  40 0002 82B0     		sub	sp, sp, #8
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 24
  43 0004 0446     		mov	r4, r0
  44 0006 1646     		mov	r6, r2
  45 0008 1D46     		mov	r5, r3
  53:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	int8_t err = 0;
  46              		.loc 1 53 2 is_stmt 1 view .LVU2
  47              	.LVL1:
  54:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint8_t reg_data[1] = {reg_addr};
  48              		.loc 1 54 2 view .LVU3
  49              		.loc 1 54 10 is_stmt 0 view .LVU4
  50 000a 8DF80410 		strb	r1, [sp, #4]
  55:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  56:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	err = i2c_transmit_ack(dev_addr, reg_data, 1);
  51              		.loc 1 56 2 is_stmt 1 view .LVU5
  52              		.loc 1 56 8 is_stmt 0 view .LVU6
  53 000e 0122     		movs	r2, #1
  54              	.LVL2:
  55              		.loc 1 56 8 view .LVU7
  56 0010 01A9     		add	r1, sp, #4
  57              	.LVL3:
  58              		.loc 1 56 8 view .LVU8
  59 0012 FFF7FEFF 		bl	Soft_I2cMaster_TransmitAck
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 3


  60              	.LVL4:
  57:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  58:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	if(err < 0) {
  61              		.loc 1 58 2 is_stmt 1 view .LVU9
  62              		.loc 1 58 4 is_stmt 0 view .LVU10
  63 0016 0028     		cmp	r0, #0
  64              	.LVL5:
  65              		.loc 1 58 4 view .LVU11
  66 0018 04DB     		blt	.L2
  59:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		return err;
  60:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	}
  61:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  62:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	err = i2c_receive_nack(dev_addr, data, len);
  67              		.loc 1 62 2 is_stmt 1 view .LVU12
  68              		.loc 1 62 8 is_stmt 0 view .LVU13
  69 001a 3246     		mov	r2, r6
  70 001c 2946     		mov	r1, r5
  71 001e 2046     		mov	r0, r4
  72 0020 FFF7FEFF 		bl	Soft_I2cMaster_ReceiveNack
  73              	.LVL6:
  63:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  64:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return err;
  74              		.loc 1 64 2 is_stmt 1 view .LVU14
  75              	.L2:
  65:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
  76              		.loc 1 65 1 is_stmt 0 view .LVU15
  77 0024 02B0     		add	sp, sp, #8
  78              	.LCFI2:
  79              		.cfi_def_cfa_offset 16
  80              		@ sp needed
  81 0026 70BD     		pop	{r4, r5, r6, pc}
  82              		.loc 1 65 1 view .LVU16
  83              		.cfi_endproc
  84              	.LFE123:
  86              		.section	.text.I2Cdev_readByte,"ax",%progbits
  87              		.align	1
  88              		.global	I2Cdev_readByte
  89              		.syntax unified
  90              		.thumb
  91              		.thumb_func
  93              	I2Cdev_readByte:
  94              	.LVL7:
  95              	.LFB124:
  66:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  67:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  68:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Read a single byte from a 8-bit device register.
  69:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
  70:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register reg_addr to read from
  71:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Buffer to save data into
  72:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of read operation (0 = success, <0 = error)
  73:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
  74:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t 	I2Cdev_readByte(uint8_t dev_addr, uint8_t reg_addr, uint8_t *data) {
  96              		.loc 1 74 76 is_stmt 1 view -0
  97              		.cfi_startproc
  98              		@ args = 0, pretend = 0, frame = 0
  99              		@ frame_needed = 0, uses_anonymous_args = 0
 100              		.loc 1 74 76 is_stmt 0 view .LVU18
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 4


 101 0000 08B5     		push	{r3, lr}
 102              	.LCFI3:
 103              		.cfi_def_cfa_offset 8
 104              		.cfi_offset 3, -8
 105              		.cfi_offset 14, -4
 106 0002 1346     		mov	r3, r2
  75:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return I2Cdev_readBytes(dev_addr, reg_addr, 1, data);
 107              		.loc 1 75 2 is_stmt 1 view .LVU19
 108              		.loc 1 75 9 is_stmt 0 view .LVU20
 109 0004 0122     		movs	r2, #1
 110              	.LVL8:
 111              		.loc 1 75 9 view .LVU21
 112 0006 FFF7FEFF 		bl	I2Cdev_readBytes
 113              	.LVL9:
  76:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 114              		.loc 1 76 1 view .LVU22
 115 000a 08BD     		pop	{r3, pc}
 116              		.cfi_endproc
 117              	.LFE124:
 119              		.section	.text.I2Cdev_readWords,"ax",%progbits
 120              		.align	1
 121              		.global	I2Cdev_readWords
 122              		.syntax unified
 123              		.thumb
 124              		.thumb_func
 126              	I2Cdev_readWords:
 127              	.LVL10:
 128              	.LFB125:
  77:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  78:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  79:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Read a several 16-bit words from a 16-bit device register.
  80:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
  81:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register reg_addr to read from
  82:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param len		Number of words to read
  83:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Buffer to save data into
  84:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of read operation (true = success)
  85:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
  86:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t 	I2Cdev_readWords(uint8_t dev_addr, uint8_t reg_addr, uint8_t len, uint16_t *data) {
 129              		.loc 1 86 91 is_stmt 1 view -0
 130              		.cfi_startproc
 131              		@ args = 0, pretend = 0, frame = 8
 132              		@ frame_needed = 1, uses_anonymous_args = 0
 133              		.loc 1 86 91 is_stmt 0 view .LVU24
 134 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 135              	.LCFI4:
 136              		.cfi_def_cfa_offset 24
 137              		.cfi_offset 4, -24
 138              		.cfi_offset 5, -20
 139              		.cfi_offset 6, -16
 140              		.cfi_offset 7, -12
 141              		.cfi_offset 8, -8
 142              		.cfi_offset 14, -4
 143 0004 82B0     		sub	sp, sp, #8
 144              	.LCFI5:
 145              		.cfi_def_cfa_offset 32
 146 0006 00AF     		add	r7, sp, #0
 147              	.LCFI6:
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 5


 148              		.cfi_def_cfa_register 7
 149 0008 8046     		mov	r8, r0
 150 000a 1E46     		mov	r6, r3
  87:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	int8_t err;
 151              		.loc 1 87 2 is_stmt 1 view .LVU25
  88:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint16_t bytes_num = len*2;
 152              		.loc 1 88 2 view .LVU26
 153              		.loc 1 88 11 is_stmt 0 view .LVU27
 154 000c 5400     		lsls	r4, r2, #1
 155              	.LVL11:
  89:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  90:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint8_t reg_info[1] = {reg_addr};
 156              		.loc 1 90 2 is_stmt 1 view .LVU28
 157              		.loc 1 90 10 is_stmt 0 view .LVU29
 158 000e 3971     		strb	r1, [r7, #4]
  91:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	err = i2c_transmit_ack(dev_addr, reg_info, 1);
 159              		.loc 1 91 2 is_stmt 1 view .LVU30
 160              		.loc 1 91 8 is_stmt 0 view .LVU31
 161 0010 0122     		movs	r2, #1
 162              	.LVL12:
 163              		.loc 1 91 8 view .LVU32
 164 0012 391D     		adds	r1, r7, #4
 165              	.LVL13:
 166              		.loc 1 91 8 view .LVU33
 167 0014 FFF7FEFF 		bl	Soft_I2cMaster_TransmitAck
 168              	.LVL14:
  92:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  93:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	if(err < 0) {
 169              		.loc 1 93 2 is_stmt 1 view .LVU34
 170              		.loc 1 93 4 is_stmt 0 view .LVU35
 171 0018 0028     		cmp	r0, #0
 172              	.LVL15:
 173              		.loc 1 93 4 view .LVU36
 174 001a 1FDB     		blt	.L7
  94:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		return err;
  95:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	}
  96:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
  97:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint8_t words_in_bytes[bytes_num];
 175              		.loc 1 97 2 is_stmt 1 view .LVU37
 176              	.LVL16:
 177              		.loc 1 97 10 is_stmt 0 view .LVU38
 178 001c E31D     		adds	r3, r4, #7
 179 001e 03F47E73 		and	r3, r3, #1016
 180 0022 ADEB030D 		sub	sp, sp, r3
 181 0026 6D46     		mov	r5, sp
 182              	.LVL17:
  98:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	err = i2c_receive_nack(dev_addr, words_in_bytes, bytes_num);
 183              		.loc 1 98 2 is_stmt 1 view .LVU39
 184              		.loc 1 98 8 is_stmt 0 view .LVU40
 185 0028 04F0FE02 		and	r2, r4, #254
 186 002c 6946     		mov	r1, sp
 187 002e 4046     		mov	r0, r8
 188 0030 FFF7FEFF 		bl	Soft_I2cMaster_ReceiveNack
 189              	.LVL18:
  99:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 100:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	if(err < 0) {
 190              		.loc 1 100 2 is_stmt 1 view .LVU41
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 6


 191              		.loc 1 100 4 is_stmt 0 view .LVU42
 192 0034 0028     		cmp	r0, #0
 193              	.LVL19:
 194              		.loc 1 100 4 view .LVU43
 195 0036 11DB     		blt	.L7
 196              	.LBB2:
 101:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		return err;
 102:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	}
 103:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 104:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint8_t words_cnt = 0;
 105:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	for(uint16_t i=0; i<bytes_num; i+=2) {
 197              		.loc 1 105 15 view .LVU44
 198 0038 0021     		movs	r1, #0
 199              	.LBE2:
 104:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	for(uint16_t i=0; i<bytes_num; i+=2) {
 200              		.loc 1 104 10 view .LVU45
 201 003a 0B46     		mov	r3, r1
 202 003c 0BE0     		b	.L8
 203              	.LVL20:
 204              	.L9:
 205              	.LBB3:
 106:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		data[words_cnt++] = (words_in_bytes[i] << 8) | words_in_bytes[i+1];
 206              		.loc 1 106 3 is_stmt 1 discriminator 3 view .LVU46
 207              		.loc 1 106 38 is_stmt 0 discriminator 3 view .LVU47
 208 003e 15F801C0 		ldrb	ip, [r5, r1]	@ zero_extendqisi2
 209              		.loc 1 106 66 discriminator 3 view .LVU48
 210 0042 4A1C     		adds	r2, r1, #1
 211              		.loc 1 106 64 discriminator 3 view .LVU49
 212 0044 A85C     		ldrb	r0, [r5, r2]	@ zero_extendqisi2
 213              		.loc 1 106 17 discriminator 3 view .LVU50
 214 0046 5A1C     		adds	r2, r3, #1
 215              	.LVL21:
 216              		.loc 1 106 48 discriminator 3 view .LVU51
 217 0048 40EA0C20 		orr	r0, r0, ip, lsl #8
 218              		.loc 1 106 21 discriminator 3 view .LVU52
 219 004c 26F81300 		strh	r0, [r6, r3, lsl #1]	@ movhi
 105:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		data[words_cnt++] = (words_in_bytes[i] << 8) | words_in_bytes[i+1];
 220              		.loc 1 105 34 is_stmt 1 discriminator 3 view .LVU53
 221 0050 0231     		adds	r1, r1, #2
 222              	.LVL22:
 105:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		data[words_cnt++] = (words_in_bytes[i] << 8) | words_in_bytes[i+1];
 223              		.loc 1 105 34 is_stmt 0 discriminator 3 view .LVU54
 224 0052 89B2     		uxth	r1, r1
 225              	.LVL23:
 226              		.loc 1 106 17 discriminator 3 view .LVU55
 227 0054 D3B2     		uxtb	r3, r2
 228              	.LVL24:
 229              	.L8:
 105:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		data[words_cnt++] = (words_in_bytes[i] << 8) | words_in_bytes[i+1];
 230              		.loc 1 105 21 is_stmt 1 discriminator 1 view .LVU56
 231 0056 A142     		cmp	r1, r4
 232 0058 F1D3     		bcc	.L9
 233              	.LBE3:
 107:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	}
 108:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 109:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return 0;
 234              		.loc 1 109 9 is_stmt 0 view .LVU57
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 7


 235 005a 0020     		movs	r0, #0
 236              	.LVL25:
 237              	.L7:
 110:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 238              		.loc 1 110 1 view .LVU58
 239 005c 0837     		adds	r7, r7, #8
 240              	.LCFI7:
 241              		.cfi_def_cfa_offset 24
 242 005e BD46     		mov	sp, r7
 243              	.LCFI8:
 244              		.cfi_def_cfa_register 13
 245              		@ sp needed
 246 0060 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 247              		.loc 1 110 1 view .LVU59
 248              		.cfi_endproc
 249              	.LFE125:
 251              		.section	.text.I2Cdev_readWord,"ax",%progbits
 252              		.align	1
 253              		.global	I2Cdev_readWord
 254              		.syntax unified
 255              		.thumb
 256              		.thumb_func
 258              	I2Cdev_readWord:
 259              	.LVL26:
 260              	.LFB126:
 111:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 112:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 113:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Read a single word from a 16-bit device register.
 114:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 115:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register regAddr to read from
 116:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Container for single word
 117:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of read operation (0 = success, <0 = error)
 118:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 119:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t 	I2Cdev_readWord(uint8_t dev_addr, uint8_t reg_addr, uint16_t *data) {
 261              		.loc 1 119 77 is_stmt 1 view -0
 262              		.cfi_startproc
 263              		@ args = 0, pretend = 0, frame = 0
 264              		@ frame_needed = 0, uses_anonymous_args = 0
 265              		.loc 1 119 77 is_stmt 0 view .LVU61
 266 0000 08B5     		push	{r3, lr}
 267              	.LCFI9:
 268              		.cfi_def_cfa_offset 8
 269              		.cfi_offset 3, -8
 270              		.cfi_offset 14, -4
 271 0002 1346     		mov	r3, r2
 120:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return I2Cdev_readWords(dev_addr, reg_addr, 1, data);
 272              		.loc 1 120 2 is_stmt 1 view .LVU62
 273              		.loc 1 120 9 is_stmt 0 view .LVU63
 274 0004 0122     		movs	r2, #1
 275              	.LVL27:
 276              		.loc 1 120 9 view .LVU64
 277 0006 FFF7FEFF 		bl	I2Cdev_readWords
 278              	.LVL28:
 121:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 279              		.loc 1 121 1 view .LVU65
 280 000a 08BD     		pop	{r3, pc}
 281              		.cfi_endproc
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 8


 282              	.LFE126:
 284              		.section	.text.I2Cdev_readBit,"ax",%progbits
 285              		.align	1
 286              		.global	I2Cdev_readBit
 287              		.syntax unified
 288              		.thumb
 289              		.thumb_func
 291              	I2Cdev_readBit:
 292              	.LVL29:
 293              	.LFB127:
 122:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 123:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 124:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Read a single bit from a 8-bit device register.
 125:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 126:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register regAddr to read from
 127:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param bitn 		Bit position to read (0-15)
 128:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Container for single bit value
 129:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of read operation (0 = success, <0 = error)
 130:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 131:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t I2Cdev_readBit(uint8_t dev_addr, uint8_t reg_addr, uint8_t bitn, uint8_t *data) {
 294              		.loc 1 131 88 is_stmt 1 view -0
 295              		.cfi_startproc
 296              		@ args = 0, pretend = 0, frame = 0
 297              		@ frame_needed = 0, uses_anonymous_args = 0
 298              		.loc 1 131 88 is_stmt 0 view .LVU67
 299 0000 38B5     		push	{r3, r4, r5, lr}
 300              	.LCFI10:
 301              		.cfi_def_cfa_offset 16
 302              		.cfi_offset 3, -16
 303              		.cfi_offset 4, -12
 304              		.cfi_offset 5, -8
 305              		.cfi_offset 14, -4
 306 0002 1546     		mov	r5, r2
 307 0004 1C46     		mov	r4, r3
 132:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	int8_t err;
 308              		.loc 1 132 2 is_stmt 1 view .LVU68
 133:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 134:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	err = I2Cdev_readByte(dev_addr, reg_addr, data);
 309              		.loc 1 134 2 view .LVU69
 310              		.loc 1 134 8 is_stmt 0 view .LVU70
 311 0006 1A46     		mov	r2, r3
 312              	.LVL30:
 313              		.loc 1 134 8 view .LVU71
 314 0008 FFF7FEFF 		bl	I2Cdev_readByte
 315              	.LVL31:
 135:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	*data = (*data >> bitn) & 0x01;
 316              		.loc 1 135 2 is_stmt 1 view .LVU72
 317              		.loc 1 135 11 is_stmt 0 view .LVU73
 318 000c 2278     		ldrb	r2, [r4]	@ zero_extendqisi2
 319              		.loc 1 135 17 view .LVU74
 320 000e 2A41     		asrs	r2, r2, r5
 321              		.loc 1 135 26 view .LVU75
 322 0010 02F00102 		and	r2, r2, #1
 323              		.loc 1 135 8 view .LVU76
 324 0014 2270     		strb	r2, [r4]
 136:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 137:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return err;
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 9


 325              		.loc 1 137 2 is_stmt 1 view .LVU77
 138:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 326              		.loc 1 138 1 is_stmt 0 view .LVU78
 327 0016 38BD     		pop	{r3, r4, r5, pc}
 328              		.loc 1 138 1 view .LVU79
 329              		.cfi_endproc
 330              	.LFE127:
 332              		.section	.text.I2Cdev_readBits,"ax",%progbits
 333              		.align	1
 334              		.global	I2Cdev_readBits
 335              		.syntax unified
 336              		.thumb
 337              		.thumb_func
 339              	I2Cdev_readBits:
 340              	.LVL32:
 341              	.LFB128:
 139:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 140:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 141:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Read several bits from a 8-bit device register.
 142:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 143:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register regAddr to read from
 144:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param start_bit First bit position to read (0-7)
 145:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param len		Number of bits to read (<= 8)
 146:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Container for right-aligned value
 147:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of read operation (0 = success, <0 = error)
 148:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 149:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t I2Cdev_readBits(uint8_t dev_addr, uint8_t reg_addr, uint8_t start_bit, 
 150:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		uint8_t len, uint8_t *data) 
 151:Libraries/ctrl_drv/i2c/I2Cdev.c **** {
 342              		.loc 1 151 1 is_stmt 1 view -0
 343              		.cfi_startproc
 344              		@ args = 4, pretend = 0, frame = 8
 345              		@ frame_needed = 0, uses_anonymous_args = 0
 346              		.loc 1 151 1 is_stmt 0 view .LVU81
 347 0000 30B5     		push	{r4, r5, lr}
 348              	.LCFI11:
 349              		.cfi_def_cfa_offset 12
 350              		.cfi_offset 4, -12
 351              		.cfi_offset 5, -8
 352              		.cfi_offset 14, -4
 353 0002 83B0     		sub	sp, sp, #12
 354              	.LCFI12:
 355              		.cfi_def_cfa_offset 24
 356 0004 1446     		mov	r4, r2
 357 0006 1D46     		mov	r5, r3
 152:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	int8_t err;
 358              		.loc 1 152 2 is_stmt 1 view .LVU82
 153:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 154:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint8_t b;
 359              		.loc 1 154 2 view .LVU83
 155:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	if ((err = I2Cdev_readByte(dev_addr, reg_addr, &b)) == 0) {
 360              		.loc 1 155 2 view .LVU84
 361              		.loc 1 155 13 is_stmt 0 view .LVU85
 362 0008 0DF10702 		add	r2, sp, #7
 363              	.LVL33:
 364              		.loc 1 155 13 view .LVU86
 365 000c FFF7FEFF 		bl	I2Cdev_readByte
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 10


 366              	.LVL34:
 367              		.loc 1 155 5 view .LVU87
 368 0010 88B9     		cbnz	r0, .L16
 369              	.LBB4:
 156:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		uint8_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 370              		.loc 1 156 3 is_stmt 1 view .LVU88
 371              		.loc 1 156 22 is_stmt 0 view .LVU89
 372 0012 0121     		movs	r1, #1
 373 0014 A940     		lsls	r1, r1, r5
 374              		.loc 1 156 30 view .LVU90
 375 0016 0139     		subs	r1, r1, #1
 376              		.loc 1 156 49 view .LVU91
 377 0018 621B     		subs	r2, r4, r5
 378              		.loc 1 156 55 view .LVU92
 379 001a 0132     		adds	r2, r2, #1
 380              		.loc 1 156 35 view .LVU93
 381 001c 01FA02F3 		lsl	r3, r1, r2
 382              	.LVL35:
 157:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		b &= mask;
 383              		.loc 1 157 3 is_stmt 1 view .LVU94
 384              		.loc 1 157 5 is_stmt 0 view .LVU95
 385 0020 9DF80710 		ldrb	r1, [sp, #7]	@ zero_extendqisi2
 386 0024 0B40     		ands	r3, r3, r1
 387              	.LVL36:
 388              		.loc 1 157 5 view .LVU96
 389 0026 8DF80730 		strb	r3, [sp, #7]
 158:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		b >>= (start_bit - len + 1);
 390              		.loc 1 158 3 is_stmt 1 view .LVU97
 391              		.loc 1 158 5 is_stmt 0 view .LVU98
 392 002a 1341     		asrs	r3, r3, r2
 393 002c DBB2     		uxtb	r3, r3
 394 002e 8DF80730 		strb	r3, [sp, #7]
 159:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		*data = b;
 395              		.loc 1 159 3 is_stmt 1 view .LVU99
 396              		.loc 1 159 9 is_stmt 0 view .LVU100
 397 0032 069A     		ldr	r2, [sp, #24]
 398              	.LVL37:
 399              		.loc 1 159 9 view .LVU101
 400 0034 1370     		strb	r3, [r2]
 401              	.LVL38:
 402              	.L16:
 403              		.loc 1 159 9 view .LVU102
 404              	.LBE4:
 160:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	}
 161:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 162:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return err;
 405              		.loc 1 162 2 is_stmt 1 view .LVU103
 163:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 406              		.loc 1 163 1 is_stmt 0 view .LVU104
 407 0036 03B0     		add	sp, sp, #12
 408              	.LCFI13:
 409              		.cfi_def_cfa_offset 12
 410              		@ sp needed
 411 0038 30BD     		pop	{r4, r5, pc}
 412              		.loc 1 163 1 view .LVU105
 413              		.cfi_endproc
 414              	.LFE128:
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 11


 416              		.section	.text.I2Cdev_readBitW,"ax",%progbits
 417              		.align	1
 418              		.global	I2Cdev_readBitW
 419              		.syntax unified
 420              		.thumb
 421              		.thumb_func
 423              	I2Cdev_readBitW:
 424              	.LVL39:
 425              	.LFB129:
 164:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 165:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 166:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Read a single bit from a 16-bit device register.
 167:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 168:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register regAddr to read from
 169:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param bit_n 	Bit position to read (0-15)
 170:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Container for single bit value
 171:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of read operation (true = success)
 172:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 173:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t 	I2Cdev_readBitW(uint8_t dev_addr, uint8_t reg_addr, uint8_t bit_n, uint16_t *data) {
 426              		.loc 1 173 92 is_stmt 1 view -0
 427              		.cfi_startproc
 428              		@ args = 0, pretend = 0, frame = 0
 429              		@ frame_needed = 0, uses_anonymous_args = 0
 430              		.loc 1 173 92 is_stmt 0 view .LVU107
 431 0000 38B5     		push	{r3, r4, r5, lr}
 432              	.LCFI14:
 433              		.cfi_def_cfa_offset 16
 434              		.cfi_offset 3, -16
 435              		.cfi_offset 4, -12
 436              		.cfi_offset 5, -8
 437              		.cfi_offset 14, -4
 438 0002 1546     		mov	r5, r2
 439 0004 1C46     		mov	r4, r3
 174:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	int8_t err;
 440              		.loc 1 174 2 is_stmt 1 view .LVU108
 175:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 176:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	err = I2Cdev_readWord(dev_addr, reg_addr, data);
 441              		.loc 1 176 2 view .LVU109
 442              		.loc 1 176 8 is_stmt 0 view .LVU110
 443 0006 1A46     		mov	r2, r3
 444              	.LVL40:
 445              		.loc 1 176 8 view .LVU111
 446 0008 FFF7FEFF 		bl	I2Cdev_readWord
 447              	.LVL41:
 177:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	*data = (*data >> bit_n) & 0x01;
 448              		.loc 1 177 2 is_stmt 1 view .LVU112
 449              		.loc 1 177 11 is_stmt 0 view .LVU113
 450 000c 2288     		ldrh	r2, [r4]
 451              		.loc 1 177 17 view .LVU114
 452 000e 2A41     		asrs	r2, r2, r5
 453              		.loc 1 177 27 view .LVU115
 454 0010 02F00102 		and	r2, r2, #1
 455              		.loc 1 177 8 view .LVU116
 456 0014 2280     		strh	r2, [r4]	@ movhi
 178:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 179:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return err;
 457              		.loc 1 179 2 is_stmt 1 view .LVU117
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 12


 180:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 458              		.loc 1 180 1 is_stmt 0 view .LVU118
 459 0016 38BD     		pop	{r3, r4, r5, pc}
 460              		.loc 1 180 1 view .LVU119
 461              		.cfi_endproc
 462              	.LFE129:
 464              		.section	.text.I2Cdev_readBitsW,"ax",%progbits
 465              		.align	1
 466              		.global	I2Cdev_readBitsW
 467              		.syntax unified
 468              		.thumb
 469              		.thumb_func
 471              	I2Cdev_readBitsW:
 472              	.LVL42:
 473              	.LFB130:
 181:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 182:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 183:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Read several bits from a 16-bit device register.
 184:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 185:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register regAddr to read from
 186:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param start_bit First bit position to read (0-15)
 187:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param len		Number of bits to read (<= 16)
 188:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Container for right-aligned value
 189:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of read operation (0 = success, <0 = error)
 190:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 191:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t I2Cdev_readBitsW(uint8_t dev_addr, uint8_t reg_addr, uint8_t start_bit,
 192:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		uint8_t len, uint16_t *data)
 193:Libraries/ctrl_drv/i2c/I2Cdev.c **** {
 474              		.loc 1 193 1 is_stmt 1 view -0
 475              		.cfi_startproc
 476              		@ args = 4, pretend = 0, frame = 8
 477              		@ frame_needed = 0, uses_anonymous_args = 0
 478              		.loc 1 193 1 is_stmt 0 view .LVU121
 479 0000 30B5     		push	{r4, r5, lr}
 480              	.LCFI15:
 481              		.cfi_def_cfa_offset 12
 482              		.cfi_offset 4, -12
 483              		.cfi_offset 5, -8
 484              		.cfi_offset 14, -4
 485 0002 83B0     		sub	sp, sp, #12
 486              	.LCFI16:
 487              		.cfi_def_cfa_offset 24
 488 0004 1446     		mov	r4, r2
 489 0006 1D46     		mov	r5, r3
 194:Libraries/ctrl_drv/i2c/I2Cdev.c ****     int8_t err;
 490              		.loc 1 194 5 is_stmt 1 view .LVU122
 195:Libraries/ctrl_drv/i2c/I2Cdev.c ****     uint16_t w;
 491              		.loc 1 195 5 view .LVU123
 196:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 197:Libraries/ctrl_drv/i2c/I2Cdev.c ****     if ((err = I2Cdev_readWord(dev_addr, reg_addr, &w)) == 0) {
 492              		.loc 1 197 5 view .LVU124
 493              		.loc 1 197 16 is_stmt 0 view .LVU125
 494 0008 0DF10602 		add	r2, sp, #6
 495              	.LVL43:
 496              		.loc 1 197 16 view .LVU126
 497 000c FFF7FEFF 		bl	I2Cdev_readWord
 498              	.LVL44:
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 13


 499              		.loc 1 197 8 view .LVU127
 500 0010 90B9     		cbnz	r0, .L21
 501              	.LBB5:
 198:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint16_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 502              		.loc 1 198 9 is_stmt 1 view .LVU128
 503              		.loc 1 198 29 is_stmt 0 view .LVU129
 504 0012 0121     		movs	r1, #1
 505 0014 A940     		lsls	r1, r1, r5
 506              		.loc 1 198 37 view .LVU130
 507 0016 0139     		subs	r1, r1, #1
 508              		.loc 1 198 56 view .LVU131
 509 0018 621B     		subs	r2, r4, r5
 510              		.loc 1 198 62 view .LVU132
 511 001a 0132     		adds	r2, r2, #1
 512              		.loc 1 198 42 view .LVU133
 513 001c 01FA02F3 		lsl	r3, r1, r2
 514              		.loc 1 198 18 view .LVU134
 515 0020 9BB2     		uxth	r3, r3
 516              	.LVL45:
 199:Libraries/ctrl_drv/i2c/I2Cdev.c ****         w &= mask;
 517              		.loc 1 199 9 is_stmt 1 view .LVU135
 518              		.loc 1 199 11 is_stmt 0 view .LVU136
 519 0022 BDF80610 		ldrh	r1, [sp, #6]
 520 0026 0B40     		ands	r3, r3, r1
 521              	.LVL46:
 522              		.loc 1 199 11 view .LVU137
 523 0028 ADF80630 		strh	r3, [sp, #6]	@ movhi
 200:Libraries/ctrl_drv/i2c/I2Cdev.c ****         w >>= (start_bit - len + 1);
 524              		.loc 1 200 9 is_stmt 1 view .LVU138
 525              		.loc 1 200 11 is_stmt 0 view .LVU139
 526 002c 1341     		asrs	r3, r3, r2
 527 002e 9BB2     		uxth	r3, r3
 528 0030 ADF80630 		strh	r3, [sp, #6]	@ movhi
 201:Libraries/ctrl_drv/i2c/I2Cdev.c ****         *data = w;
 529              		.loc 1 201 9 is_stmt 1 view .LVU140
 530              		.loc 1 201 15 is_stmt 0 view .LVU141
 531 0034 069A     		ldr	r2, [sp, #24]
 532              	.LVL47:
 533              		.loc 1 201 15 view .LVU142
 534 0036 1380     		strh	r3, [r2]	@ movhi
 535              	.LVL48:
 536              	.L21:
 537              		.loc 1 201 15 view .LVU143
 538              	.LBE5:
 202:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 203:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 204:Libraries/ctrl_drv/i2c/I2Cdev.c ****     return err;
 539              		.loc 1 204 5 is_stmt 1 view .LVU144
 205:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 540              		.loc 1 205 1 is_stmt 0 view .LVU145
 541 0038 03B0     		add	sp, sp, #12
 542              	.LCFI17:
 543              		.cfi_def_cfa_offset 12
 544              		@ sp needed
 545 003a 30BD     		pop	{r4, r5, pc}
 546              		.loc 1 205 1 view .LVU146
 547              		.cfi_endproc
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 14


 548              	.LFE130:
 550              		.section	.text.I2Cdev_writeBytes,"ax",%progbits
 551              		.align	1
 552              		.global	I2Cdev_writeBytes
 553              		.syntax unified
 554              		.thumb
 555              		.thumb_func
 557              	I2Cdev_writeBytes:
 558              	.LVL49:
 559              	.LFB131:
 206:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 207:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 208:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Write multiple bytes to an 8-bit device register.
 209:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 210:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	First register address to write to
 211:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param len 		Number of bytes to write
 212:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Buffer to copy new data from
 213:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of operation (0 = success, <0 = error)
 214:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 215:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t 	I2Cdev_writeBytes(uint8_t dev_addr, uint8_t reg_addr, uint8_t len, uint8_t *data) {
 560              		.loc 1 215 91 is_stmt 1 view -0
 561              		.cfi_startproc
 562              		@ args = 0, pretend = 0, frame = 0
 563              		@ frame_needed = 1, uses_anonymous_args = 0
 564              		.loc 1 215 91 is_stmt 0 view .LVU148
 565 0000 B0B5     		push	{r4, r5, r7, lr}
 566              	.LCFI18:
 567              		.cfi_def_cfa_offset 16
 568              		.cfi_offset 4, -16
 569              		.cfi_offset 5, -12
 570              		.cfi_offset 7, -8
 571              		.cfi_offset 14, -4
 572 0002 00AF     		add	r7, sp, #0
 573              	.LCFI19:
 574              		.cfi_def_cfa_register 7
 575 0004 0446     		mov	r4, r0
 216:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	int8_t err;
 576              		.loc 1 216 2 is_stmt 1 view .LVU149
 217:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint8_t ts_data[len+1];
 577              		.loc 1 217 2 view .LVU150
 578              		.loc 1 217 21 is_stmt 0 view .LVU151
 579 0006 551C     		adds	r5, r2, #1
 580              	.LVL50:
 581              		.loc 1 217 10 view .LVU152
 582 0008 02F1080C 		add	ip, r2, #8
 583 000c 0CF4FC7C 		and	ip, ip, #504
 584 0010 ADEB0C0D 		sub	sp, sp, ip
 585              	.LVL51:
 218:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 219:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	ts_data[0] = reg_addr;
 586              		.loc 1 219 2 is_stmt 1 view .LVU153
 587              		.loc 1 219 13 is_stmt 0 view .LVU154
 588 0014 6846     		mov	r0, sp
 589              	.LVL52:
 590              		.loc 1 219 13 view .LVU155
 591 0016 00F8011B 		strb	r1, [r0], #1
 220:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	memcpy(ts_data+1, data, len);
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 15


 592              		.loc 1 220 2 is_stmt 1 view .LVU156
 593 001a 1946     		mov	r1, r3
 594              	.LVL53:
 595              		.loc 1 220 2 is_stmt 0 view .LVU157
 596 001c FFF7FEFF 		bl	memcpy
 597              	.LVL54:
 221:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 222:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	err = i2c_transmit_nack(dev_addr, ts_data, len+1);
 598              		.loc 1 222 2 is_stmt 1 view .LVU158
 599              		.loc 1 222 8 is_stmt 0 view .LVU159
 600 0020 EAB2     		uxtb	r2, r5
 601 0022 6946     		mov	r1, sp
 602 0024 2046     		mov	r0, r4
 603 0026 FFF7FEFF 		bl	Soft_I2cMaster_TransmitNack
 604              	.LVL55:
 223:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return err;
 605              		.loc 1 223 2 is_stmt 1 view .LVU160
 224:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 606              		.loc 1 224 1 is_stmt 0 view .LVU161
 607 002a BD46     		mov	sp, r7
 608              	.LCFI20:
 609              		.cfi_def_cfa_register 13
 610              	.LVL56:
 611              		.loc 1 224 1 view .LVU162
 612              		@ sp needed
 613 002c B0BD     		pop	{r4, r5, r7, pc}
 614              		.loc 1 224 1 view .LVU163
 615              		.cfi_endproc
 616              	.LFE131:
 618              		.section	.text.I2Cdev_writeByte,"ax",%progbits
 619              		.align	1
 620              		.global	I2Cdev_writeByte
 621              		.syntax unified
 622              		.thumb
 623              		.thumb_func
 625              	I2Cdev_writeByte:
 626              	.LVL57:
 627              	.LFB132:
 225:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 226:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 227:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Write single byte to an 8-bit device register.
 228:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 229:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register address to write to
 230:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		New byte value to write
 231:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of operation (0 = success, <0 = error)
 232:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 233:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t 	I2Cdev_writeByte(uint8_t dev_addr, uint8_t reg_addr, uint8_t data) {
 628              		.loc 1 233 76 is_stmt 1 view -0
 629              		.cfi_startproc
 630              		@ args = 0, pretend = 0, frame = 8
 631              		@ frame_needed = 0, uses_anonymous_args = 0
 632              		.loc 1 233 76 is_stmt 0 view .LVU165
 633 0000 00B5     		push	{lr}
 634              	.LCFI21:
 635              		.cfi_def_cfa_offset 4
 636              		.cfi_offset 14, -4
 637 0002 83B0     		sub	sp, sp, #12
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 16


 638              	.LCFI22:
 639              		.cfi_def_cfa_offset 16
 234:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	int8_t err;
 640              		.loc 1 234 2 is_stmt 1 view .LVU166
 235:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 236:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint8_t ts_data[2] = {reg_addr, data};
 641              		.loc 1 236 2 view .LVU167
 642              		.loc 1 236 10 is_stmt 0 view .LVU168
 643 0004 8DF80410 		strb	r1, [sp, #4]
 644 0008 8DF80520 		strb	r2, [sp, #5]
 237:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	err = i2c_transmit_nack(dev_addr, ts_data, 2);
 645              		.loc 1 237 2 is_stmt 1 view .LVU169
 646              		.loc 1 237 8 is_stmt 0 view .LVU170
 647 000c 0222     		movs	r2, #2
 648              	.LVL58:
 649              		.loc 1 237 8 view .LVU171
 650 000e 01A9     		add	r1, sp, #4
 651              	.LVL59:
 652              		.loc 1 237 8 view .LVU172
 653 0010 FFF7FEFF 		bl	Soft_I2cMaster_TransmitNack
 654              	.LVL60:
 238:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 239:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return err;
 655              		.loc 1 239 2 is_stmt 1 view .LVU173
 240:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 656              		.loc 1 240 1 is_stmt 0 view .LVU174
 657 0014 03B0     		add	sp, sp, #12
 658              	.LCFI23:
 659              		.cfi_def_cfa_offset 4
 660              		@ sp needed
 661 0016 5DF804FB 		ldr	pc, [sp], #4
 662              		.cfi_endproc
 663              	.LFE132:
 665              		.section	.text.I2Cdev_writeWord,"ax",%progbits
 666              		.align	1
 667              		.global	I2Cdev_writeWord
 668              		.syntax unified
 669              		.thumb
 670              		.thumb_func
 672              	I2Cdev_writeWord:
 673              	.LVL61:
 674              	.LFB133:
 241:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 242:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 243:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Write single 16-bit word to an 16-bit device register.
 244:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 245:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register address to write to
 246:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		New byte value to write
 247:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of operation (0 = success, <0 = error)
 248:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 249:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t 	I2Cdev_writeWord(uint8_t dev_addr, uint8_t reg_addr, uint16_t data) {
 675              		.loc 1 249 77 is_stmt 1 view -0
 676              		.cfi_startproc
 677              		@ args = 0, pretend = 0, frame = 8
 678              		@ frame_needed = 0, uses_anonymous_args = 0
 679              		.loc 1 249 77 is_stmt 0 view .LVU176
 680 0000 00B5     		push	{lr}
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 17


 681              	.LCFI24:
 682              		.cfi_def_cfa_offset 4
 683              		.cfi_offset 14, -4
 684 0002 83B0     		sub	sp, sp, #12
 685              	.LCFI25:
 686              		.cfi_def_cfa_offset 16
 250:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	int8_t err;
 687              		.loc 1 250 2 is_stmt 1 view .LVU177
 251:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint8_t ts_data[3] = {reg_addr, (data >> 8) & 0xFF, data & 0xFF};
 688              		.loc 1 251 2 view .LVU178
 689              		.loc 1 251 10 is_stmt 0 view .LVU179
 690 0004 8DF80410 		strb	r1, [sp, #4]
 691 0008 130A     		lsrs	r3, r2, #8
 692 000a 8DF80530 		strb	r3, [sp, #5]
 693 000e 8DF80620 		strb	r2, [sp, #6]
 252:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 253:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	err = i2c_transmit_nack(dev_addr, ts_data, 3);
 694              		.loc 1 253 2 is_stmt 1 view .LVU180
 695              		.loc 1 253 8 is_stmt 0 view .LVU181
 696 0012 0322     		movs	r2, #3
 697              	.LVL62:
 698              		.loc 1 253 8 view .LVU182
 699 0014 01A9     		add	r1, sp, #4
 700              	.LVL63:
 701              		.loc 1 253 8 view .LVU183
 702 0016 FFF7FEFF 		bl	Soft_I2cMaster_TransmitNack
 703              	.LVL64:
 254:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return err;
 704              		.loc 1 254 2 is_stmt 1 view .LVU184
 255:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 705              		.loc 1 255 1 is_stmt 0 view .LVU185
 706 001a 03B0     		add	sp, sp, #12
 707              	.LCFI26:
 708              		.cfi_def_cfa_offset 4
 709              		@ sp needed
 710 001c 5DF804FB 		ldr	pc, [sp], #4
 711              		.cfi_endproc
 712              	.LFE133:
 714              		.section	.text.I2Cdev_writeWords,"ax",%progbits
 715              		.align	1
 716              		.global	I2Cdev_writeWords
 717              		.syntax unified
 718              		.thumb
 719              		.thumb_func
 721              	I2Cdev_writeWords:
 722              	.LVL65:
 723              	.LFB134:
 256:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 257:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 258:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Write multiple words to a 16-bit device register.
 259:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 260:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	First register address to write to
 261:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param len 		Number of words to write
 262:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Buffer to copy new data from
 263:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of operation (0 = success, <0 = error)
 264:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 265:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t 	I2Cdev_writeWords(uint8_t dev_addr, uint8_t reg_addr, uint8_t len, uint16_t *data) {
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 18


 724              		.loc 1 265 92 is_stmt 1 view -0
 725              		.cfi_startproc
 726              		@ args = 0, pretend = 0, frame = 0
 727              		@ frame_needed = 1, uses_anonymous_args = 0
 728              		.loc 1 265 92 is_stmt 0 view .LVU187
 729 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 730              	.LCFI27:
 731              		.cfi_def_cfa_offset 24
 732              		.cfi_offset 3, -24
 733              		.cfi_offset 4, -20
 734              		.cfi_offset 5, -16
 735              		.cfi_offset 6, -12
 736              		.cfi_offset 7, -8
 737              		.cfi_offset 14, -4
 738 0002 00AF     		add	r7, sp, #0
 739              	.LCFI28:
 740              		.cfi_def_cfa_register 7
 741 0004 0D46     		mov	r5, r1
 266:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint16_t bytes_num = len*2+1;
 742              		.loc 1 266 2 is_stmt 1 view .LVU188
 743              		.loc 1 266 28 is_stmt 0 view .LVU189
 744 0006 5400     		lsls	r4, r2, #1
 745              		.loc 1 266 11 view .LVU190
 746 0008 661C     		adds	r6, r4, #1
 747              	.LVL66:
 267:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint8_t bytes[bytes_num];
 748              		.loc 1 267 2 is_stmt 1 view .LVU191
 749              		.loc 1 267 10 is_stmt 0 view .LVU192
 750 000a 0834     		adds	r4, r4, #8
 751 000c 04F47E74 		and	r4, r4, #1016
 752 0010 ADEB040D 		sub	sp, sp, r4
 753 0014 6946     		mov	r1, sp
 754              	.LVL67:
 268:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 269:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	bytes[0] = reg_addr;
 755              		.loc 1 269 2 is_stmt 1 view .LVU193
 756              		.loc 1 269 11 is_stmt 0 view .LVU194
 757 0016 8DF80050 		strb	r5, [sp]
 270:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 271:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint16_t bytes_pos = 1;
 758              		.loc 1 271 2 is_stmt 1 view .LVU195
 759              	.LVL68:
 272:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	for(uint8_t i=0; i<len; i++) {
 760              		.loc 1 272 2 view .LVU196
 761              	.LBB6:
 762              		.loc 1 272 6 view .LVU197
 763              		.loc 1 272 14 is_stmt 0 view .LVU198
 764 001a 4FF0000C 		mov	ip, #0
 765              	.LBE6:
 271:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	for(uint8_t i=0; i<len; i++) {
 766              		.loc 1 271 11 view .LVU199
 767 001e 4FF0010E 		mov	lr, #1
 768              	.LBB7:
 769              		.loc 1 272 2 view .LVU200
 770 0022 0FE0     		b	.L30
 771              	.LVL69:
 772              	.L31:
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 19


 273:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		bytes[bytes_pos] = (data[i] >> 8) & 0xFF;
 773              		.loc 1 273 3 is_stmt 1 discriminator 3 view .LVU201
 774              		.loc 1 273 27 is_stmt 0 discriminator 3 view .LVU202
 775 0024 33F81C40 		ldrh	r4, [r3, ip, lsl #1]
 776              		.loc 1 273 20 discriminator 3 view .LVU203
 777 0028 250A     		lsrs	r5, r4, #8
 778 002a 01F80E50 		strb	r5, [r1, lr]
 274:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		bytes[bytes_pos+1] = data[i] & 0xFF;
 779              		.loc 1 274 3 is_stmt 1 discriminator 3 view .LVU204
 780              		.loc 1 274 18 is_stmt 0 discriminator 3 view .LVU205
 781 002e 0EF10105 		add	r5, lr, #1
 782              		.loc 1 274 22 discriminator 3 view .LVU206
 783 0032 4C55     		strb	r4, [r1, r5]
 275:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 276:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		bytes_pos += 2;
 784              		.loc 1 276 3 is_stmt 1 discriminator 3 view .LVU207
 785              		.loc 1 276 13 is_stmt 0 discriminator 3 view .LVU208
 786 0034 0EF1020E 		add	lr, lr, #2
 787              	.LVL70:
 788              		.loc 1 276 13 discriminator 3 view .LVU209
 789 0038 1FFA8EFE 		uxth	lr, lr
 790              	.LVL71:
 272:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		bytes[bytes_pos] = (data[i] >> 8) & 0xFF;
 791              		.loc 1 272 27 is_stmt 1 discriminator 3 view .LVU210
 792 003c 0CF1010C 		add	ip, ip, #1
 793              	.LVL72:
 272:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		bytes[bytes_pos] = (data[i] >> 8) & 0xFF;
 794              		.loc 1 272 27 is_stmt 0 discriminator 3 view .LVU211
 795 0040 5FFA8CFC 		uxtb	ip, ip
 796              	.LVL73:
 797              	.L30:
 272:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		bytes[bytes_pos] = (data[i] >> 8) & 0xFF;
 798              		.loc 1 272 20 is_stmt 1 discriminator 1 view .LVU212
 799 0044 9445     		cmp	ip, r2
 800 0046 EDD3     		bcc	.L31
 801              	.LBE7:
 277:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	}
 278:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 279:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return i2c_transmit_nack(dev_addr, bytes, bytes_num);
 802              		.loc 1 279 2 view .LVU213
 803              		.loc 1 279 9 is_stmt 0 view .LVU214
 804 0048 F2B2     		uxtb	r2, r6
 805              	.LVL74:
 806              		.loc 1 279 9 view .LVU215
 807 004a FFF7FEFF 		bl	Soft_I2cMaster_TransmitNack
 808              	.LVL75:
 280:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 809              		.loc 1 280 1 view .LVU216
 810 004e BD46     		mov	sp, r7
 811              	.LCFI29:
 812              		.cfi_def_cfa_register 13
 813              	.LVL76:
 814              		.loc 1 280 1 view .LVU217
 815              		@ sp needed
 816 0050 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 817              		.loc 1 280 1 view .LVU218
 818              		.cfi_endproc
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 20


 819              	.LFE134:
 821              		.section	.text.I2Cdev_writeBit,"ax",%progbits
 822              		.align	1
 823              		.global	I2Cdev_writeBit
 824              		.syntax unified
 825              		.thumb
 826              		.thumb_func
 828              	I2Cdev_writeBit:
 829              	.LVL77:
 830              	.LFB135:
 281:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 282:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 283:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** write a single bit in an 8-bit device register.
 284:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 285:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register regAddr to write to
 286:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param bit_n 	Bit position to write (0-7)
 287:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		New bit value to write
 288:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of operation (0 = success, <0 = error)
 289:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 290:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t 	I2Cdev_writeBit(uint8_t dev_addr, uint8_t reg_addr, uint8_t bit_n, uint8_t data) {
 831              		.loc 1 290 90 is_stmt 1 view -0
 832              		.cfi_startproc
 833              		@ args = 0, pretend = 0, frame = 8
 834              		@ frame_needed = 0, uses_anonymous_args = 0
 835              		.loc 1 290 90 is_stmt 0 view .LVU220
 836 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 837              	.LCFI30:
 838              		.cfi_def_cfa_offset 20
 839              		.cfi_offset 4, -20
 840              		.cfi_offset 5, -16
 841              		.cfi_offset 6, -12
 842              		.cfi_offset 7, -8
 843              		.cfi_offset 14, -4
 844 0002 83B0     		sub	sp, sp, #12
 845              	.LCFI31:
 846              		.cfi_def_cfa_offset 32
 847 0004 0446     		mov	r4, r0
 848 0006 0D46     		mov	r5, r1
 849 0008 1746     		mov	r7, r2
 850 000a 1E46     		mov	r6, r3
 291:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint8_t b;
 851              		.loc 1 291 2 is_stmt 1 view .LVU221
 292:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	int8_t err;
 852              		.loc 1 292 2 view .LVU222
 293:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 294:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	err = I2Cdev_readByte(dev_addr, reg_addr, &b);
 853              		.loc 1 294 2 view .LVU223
 854              		.loc 1 294 8 is_stmt 0 view .LVU224
 855 000c 0DF10702 		add	r2, sp, #7
 856              	.LVL78:
 857              		.loc 1 294 8 view .LVU225
 858 0010 FFF7FEFF 		bl	I2Cdev_readByte
 859              	.LVL79:
 295:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	if(err < 0) {
 860              		.loc 1 295 2 is_stmt 1 view .LVU226
 861              		.loc 1 295 4 is_stmt 0 view .LVU227
 862 0014 0028     		cmp	r0, #0
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 21


 863              	.LVL80:
 864              		.loc 1 295 4 view .LVU228
 865 0016 0CDB     		blt	.L34
 296:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		return err;
 297:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	}
 298:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 299:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	b = (data != 0) ? (b | (1<<bit_n)) : (b &= ~(1<<bit_n));
 866              		.loc 1 299 2 is_stmt 1 view .LVU229
 867              		.loc 1 299 4 is_stmt 0 view .LVU230
 868 0018 6EB1     		cbz	r6, .L35
 869              		.loc 1 299 27 discriminator 1 view .LVU231
 870 001a 0123     		movs	r3, #1
 871 001c BB40     		lsls	r3, r3, r7
 872              		.loc 1 299 23 discriminator 1 view .LVU232
 873 001e 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 874              		.loc 1 299 4 discriminator 1 view .LVU233
 875 0022 1A43     		orrs	r2, r2, r3
 876 0024 D2B2     		uxtb	r2, r2
 877              	.L36:
 878              		.loc 1 299 4 discriminator 4 view .LVU234
 879 0026 8DF80720 		strb	r2, [sp, #7]
 300:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 301:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return I2Cdev_writeByte(dev_addr, reg_addr, b);
 880              		.loc 1 301 2 is_stmt 1 discriminator 4 view .LVU235
 881              		.loc 1 301 9 is_stmt 0 discriminator 4 view .LVU236
 882 002a 2946     		mov	r1, r5
 883 002c 2046     		mov	r0, r4
 884 002e FFF7FEFF 		bl	I2Cdev_writeByte
 885              	.LVL81:
 886              	.L34:
 302:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 887              		.loc 1 302 1 view .LVU237
 888 0032 03B0     		add	sp, sp, #12
 889              	.LCFI32:
 890              		.cfi_remember_state
 891              		.cfi_def_cfa_offset 20
 892              		@ sp needed
 893 0034 F0BD     		pop	{r4, r5, r6, r7, pc}
 894              	.L35:
 895              	.LCFI33:
 896              		.cfi_restore_state
 299:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 897              		.loc 1 299 48 discriminator 2 view .LVU238
 898 0036 0123     		movs	r3, #1
 899 0038 BB40     		lsls	r3, r3, r7
 299:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 900              		.loc 1 299 42 discriminator 2 view .LVU239
 901 003a DB43     		mvns	r3, r3
 902 003c 5BB2     		sxtb	r3, r3
 903 003e 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 904 0042 1A40     		ands	r2, r2, r3
 905 0044 8DF80720 		strb	r2, [sp, #7]
 906 0048 EDE7     		b	.L36
 907              		.cfi_endproc
 908              	.LFE135:
 910              		.section	.text.I2Cdev_writeBitW,"ax",%progbits
 911              		.align	1
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 22


 912              		.global	I2Cdev_writeBitW
 913              		.syntax unified
 914              		.thumb
 915              		.thumb_func
 917              	I2Cdev_writeBitW:
 918              	.LVL82:
 919              	.LFB136:
 303:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 304:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 305:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** write a single bit in a 16-bit device register.
 306:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 307:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register regAddr to write to
 308:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param bit_n 	Bit position to write (0-15)
 309:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		New bit value to write
 310:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of operation (0 = success, <0 = error)
 311:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 312:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t 	I2Cdev_writeBitW(uint8_t dev_addr, uint8_t reg_addr, uint8_t bit_n, uint16_t data) {
 920              		.loc 1 312 92 is_stmt 1 view -0
 921              		.cfi_startproc
 922              		@ args = 0, pretend = 0, frame = 8
 923              		@ frame_needed = 0, uses_anonymous_args = 0
 924              		.loc 1 312 92 is_stmt 0 view .LVU241
 925 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 926              	.LCFI34:
 927              		.cfi_def_cfa_offset 20
 928              		.cfi_offset 4, -20
 929              		.cfi_offset 5, -16
 930              		.cfi_offset 6, -12
 931              		.cfi_offset 7, -8
 932              		.cfi_offset 14, -4
 933 0002 83B0     		sub	sp, sp, #12
 934              	.LCFI35:
 935              		.cfi_def_cfa_offset 32
 936 0004 0446     		mov	r4, r0
 937 0006 0D46     		mov	r5, r1
 938 0008 1646     		mov	r6, r2
 939 000a 1F46     		mov	r7, r3
 313:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	uint16_t w;
 940              		.loc 1 313 2 is_stmt 1 view .LVU242
 314:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	I2Cdev_readWord(dev_addr, reg_addr, &w);
 941              		.loc 1 314 2 view .LVU243
 942 000c 0DF10602 		add	r2, sp, #6
 943              	.LVL83:
 944              		.loc 1 314 2 is_stmt 0 view .LVU244
 945 0010 FFF7FEFF 		bl	I2Cdev_readWord
 946              	.LVL84:
 315:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 316:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	w = (data != 0) ? (w | (1<<bit_n)) : (w &= ~(1<<bit_n));
 947              		.loc 1 316 2 is_stmt 1 view .LVU245
 948              		.loc 1 316 4 is_stmt 0 view .LVU246
 949 0014 6FB1     		cbz	r7, .L39
 950              		.loc 1 316 27 discriminator 1 view .LVU247
 951 0016 0123     		movs	r3, #1
 952 0018 B340     		lsls	r3, r3, r6
 953              		.loc 1 316 23 discriminator 1 view .LVU248
 954 001a BDF80620 		ldrh	r2, [sp, #6]
 955              		.loc 1 316 4 discriminator 1 view .LVU249
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 23


 956 001e 1A43     		orrs	r2, r2, r3
 957 0020 92B2     		uxth	r2, r2
 958              	.L40:
 959              		.loc 1 316 4 discriminator 4 view .LVU250
 960 0022 ADF80620 		strh	r2, [sp, #6]	@ movhi
 317:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 318:Libraries/ctrl_drv/i2c/I2Cdev.c **** 	return I2Cdev_writeWord(dev_addr, reg_addr, w);
 961              		.loc 1 318 2 is_stmt 1 discriminator 4 view .LVU251
 962              		.loc 1 318 9 is_stmt 0 discriminator 4 view .LVU252
 963 0026 2946     		mov	r1, r5
 964 0028 2046     		mov	r0, r4
 965 002a FFF7FEFF 		bl	I2Cdev_writeWord
 966              	.LVL85:
 319:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 967              		.loc 1 319 1 discriminator 4 view .LVU253
 968 002e 03B0     		add	sp, sp, #12
 969              	.LCFI36:
 970              		.cfi_remember_state
 971              		.cfi_def_cfa_offset 20
 972              		@ sp needed
 973 0030 F0BD     		pop	{r4, r5, r6, r7, pc}
 974              	.L39:
 975              	.LCFI37:
 976              		.cfi_restore_state
 316:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 977              		.loc 1 316 48 discriminator 2 view .LVU254
 978 0032 0123     		movs	r3, #1
 979 0034 03FA06F2 		lsl	r2, r3, r6
 316:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 980              		.loc 1 316 42 discriminator 2 view .LVU255
 981 0038 D243     		mvns	r2, r2
 982 003a 12B2     		sxth	r2, r2
 983 003c BDF80630 		ldrh	r3, [sp, #6]
 984 0040 1A40     		ands	r2, r2, r3
 985 0042 92B2     		uxth	r2, r2
 986 0044 ADF80620 		strh	r2, [sp, #6]	@ movhi
 987 0048 EBE7     		b	.L40
 988              		.cfi_endproc
 989              	.LFE136:
 991              		.section	.text.I2Cdev_writeBits,"ax",%progbits
 992              		.align	1
 993              		.global	I2Cdev_writeBits
 994              		.syntax unified
 995              		.thumb
 996              		.thumb_func
 998              	I2Cdev_writeBits:
 999              	.LVL86:
 1000              	.LFB137:
 320:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 321:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 322:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Write multiple bits in an 8-bit device register.
 323:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 324:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register regAddr to write to
 325:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param start_bit First bit position to write (0-7)
 326:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param len 		Number of bits to write (not more than 8)
 327:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Right-aligned value to write
 328:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of operation (0 = success, <0 = error)
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 24


 329:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 330:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t I2Cdev_writeBits(uint8_t dev_addr, uint8_t reg_addr, uint8_t start_bit,
 331:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		uint8_t len, uint8_t data)
 332:Libraries/ctrl_drv/i2c/I2Cdev.c **** {
 1001              		.loc 1 332 1 is_stmt 1 view -0
 1002              		.cfi_startproc
 1003              		@ args = 4, pretend = 0, frame = 8
 1004              		@ frame_needed = 0, uses_anonymous_args = 0
 1005              		.loc 1 332 1 is_stmt 0 view .LVU257
 1006 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1007              	.LCFI38:
 1008              		.cfi_def_cfa_offset 20
 1009              		.cfi_offset 4, -20
 1010              		.cfi_offset 5, -16
 1011              		.cfi_offset 6, -12
 1012              		.cfi_offset 7, -8
 1013              		.cfi_offset 14, -4
 1014 0002 83B0     		sub	sp, sp, #12
 1015              	.LCFI39:
 1016              		.cfi_def_cfa_offset 32
 1017 0004 0546     		mov	r5, r0
 1018 0006 0E46     		mov	r6, r1
 1019 0008 1446     		mov	r4, r2
 1020 000a 1F46     		mov	r7, r3
 333:Libraries/ctrl_drv/i2c/I2Cdev.c ****     uint8_t b;
 1021              		.loc 1 333 5 is_stmt 1 view .LVU258
 334:Libraries/ctrl_drv/i2c/I2Cdev.c ****     int8_t err;
 1022              		.loc 1 334 5 view .LVU259
 335:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 336:Libraries/ctrl_drv/i2c/I2Cdev.c ****     if ((err = I2Cdev_readByte(dev_addr, reg_addr, &b)) == 0) {
 1023              		.loc 1 336 5 view .LVU260
 1024              		.loc 1 336 16 is_stmt 0 view .LVU261
 1025 000c 0DF10702 		add	r2, sp, #7
 1026              	.LVL87:
 1027              		.loc 1 336 16 view .LVU262
 1028 0010 FFF7FEFF 		bl	I2Cdev_readByte
 1029              	.LVL88:
 1030              		.loc 1 336 8 view .LVU263
 1031 0014 08B1     		cbz	r0, .L45
 1032              	.LVL89:
 1033              	.L43:
 337:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint8_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 338:Libraries/ctrl_drv/i2c/I2Cdev.c ****         data <<= (start_bit - len + 1); // shift data into correct position
 339:Libraries/ctrl_drv/i2c/I2Cdev.c ****         data &= mask; // zero all non-important bits in data
 340:Libraries/ctrl_drv/i2c/I2Cdev.c ****         b &= ~(mask); // zero all important bits in existing byte
 341:Libraries/ctrl_drv/i2c/I2Cdev.c ****         b |= data; // combine data with existing byte
 342:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 343:Libraries/ctrl_drv/i2c/I2Cdev.c ****         return I2Cdev_writeByte(dev_addr, reg_addr, b);
 344:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 345:Libraries/ctrl_drv/i2c/I2Cdev.c ****     else {
 346:Libraries/ctrl_drv/i2c/I2Cdev.c ****         return err;
 347:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 348:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 1034              		.loc 1 348 1 view .LVU264
 1035 0016 03B0     		add	sp, sp, #12
 1036              	.LCFI40:
 1037              		.cfi_remember_state
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 25


 1038              		.cfi_def_cfa_offset 20
 1039              		@ sp needed
 1040 0018 F0BD     		pop	{r4, r5, r6, r7, pc}
 1041              	.LVL90:
 1042              	.L45:
 1043              	.LCFI41:
 1044              		.cfi_restore_state
 1045              	.LBB8:
 337:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint8_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1046              		.loc 1 337 9 is_stmt 1 view .LVU265
 337:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint8_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1047              		.loc 1 337 28 is_stmt 0 view .LVU266
 1048 001a 4FF0010C 		mov	ip, #1
 1049 001e 0CFA07FC 		lsl	ip, ip, r7
 337:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint8_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1050              		.loc 1 337 36 view .LVU267
 1051 0022 0CF1FF3C 		add	ip, ip, #-1
 337:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint8_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1052              		.loc 1 337 55 view .LVU268
 1053 0026 E41B     		subs	r4, r4, r7
 337:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint8_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1054              		.loc 1 337 61 view .LVU269
 1055 0028 0134     		adds	r4, r4, #1
 337:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint8_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1056              		.loc 1 337 41 view .LVU270
 1057 002a 0CFA04FC 		lsl	ip, ip, r4
 1058              	.LVL91:
 338:Libraries/ctrl_drv/i2c/I2Cdev.c ****         data &= mask; // zero all non-important bits in data
 1059              		.loc 1 338 9 is_stmt 1 view .LVU271
 338:Libraries/ctrl_drv/i2c/I2Cdev.c ****         data &= mask; // zero all non-important bits in data
 1060              		.loc 1 338 14 is_stmt 0 view .LVU272
 1061 002e 9DF82030 		ldrb	r3, [sp, #32]	@ zero_extendqisi2
 1062 0032 A340     		lsls	r3, r3, r4
 1063 0034 DBB2     		uxtb	r3, r3
 1064              	.LVL92:
 339:Libraries/ctrl_drv/i2c/I2Cdev.c ****         b &= ~(mask); // zero all important bits in existing byte
 1065              		.loc 1 339 9 is_stmt 1 view .LVU273
 339:Libraries/ctrl_drv/i2c/I2Cdev.c ****         b &= ~(mask); // zero all important bits in existing byte
 1066              		.loc 1 339 14 is_stmt 0 view .LVU274
 1067 0036 0CEA0303 		and	r3, ip, r3
 1068              	.LVL93:
 340:Libraries/ctrl_drv/i2c/I2Cdev.c ****         b |= data; // combine data with existing byte
 1069              		.loc 1 340 9 is_stmt 1 view .LVU275
 340:Libraries/ctrl_drv/i2c/I2Cdev.c ****         b |= data; // combine data with existing byte
 1070              		.loc 1 340 11 is_stmt 0 view .LVU276
 1071 003a 6FEA0C0C 		mvn	ip, ip
 1072              	.LVL94:
 340:Libraries/ctrl_drv/i2c/I2Cdev.c ****         b |= data; // combine data with existing byte
 1073              		.loc 1 340 11 view .LVU277
 1074 003e 4FFA8CFC 		sxtb	ip, ip
 1075              	.LVL95:
 340:Libraries/ctrl_drv/i2c/I2Cdev.c ****         b |= data; // combine data with existing byte
 1076              		.loc 1 340 11 view .LVU278
 1077 0042 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 1078 0046 02EA0C02 		and	r2, r2, ip
 1079 004a 8DF80720 		strb	r2, [sp, #7]
 341:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 26


 1080              		.loc 1 341 9 is_stmt 1 view .LVU279
 341:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 1081              		.loc 1 341 11 is_stmt 0 view .LVU280
 1082 004e 1A43     		orrs	r2, r2, r3
 1083 0050 8DF80720 		strb	r2, [sp, #7]
 343:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 1084              		.loc 1 343 9 is_stmt 1 view .LVU281
 343:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 1085              		.loc 1 343 16 is_stmt 0 view .LVU282
 1086 0054 3146     		mov	r1, r6
 1087 0056 2846     		mov	r0, r5
 1088 0058 FFF7FEFF 		bl	I2Cdev_writeByte
 1089              	.LVL96:
 343:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 1090              		.loc 1 343 16 view .LVU283
 1091 005c DBE7     		b	.L43
 1092              	.LBE8:
 1093              		.cfi_endproc
 1094              	.LFE137:
 1096              		.section	.text.I2Cdev_writeBitsW,"ax",%progbits
 1097              		.align	1
 1098              		.global	I2Cdev_writeBitsW
 1099              		.syntax unified
 1100              		.thumb
 1101              		.thumb_func
 1103              	I2Cdev_writeBitsW:
 1104              	.LVL97:
 1105              	.LFB138:
 349:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 350:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 351:Libraries/ctrl_drv/i2c/I2Cdev.c **** /** Write multiple bits in a 16-bit device register.
 352:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param dev_addr 	I2C slave device address
 353:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param reg_addr 	Register regAddr to write to
 354:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param start_bit First bit position to write (0-15)
 355:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param len 		Number of bits to write (not more than 16)
 356:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @param data 		Right-aligned value to write
 357:Libraries/ctrl_drv/i2c/I2Cdev.c ****  * @return Status of operation (0 = success, <0 = error)
 358:Libraries/ctrl_drv/i2c/I2Cdev.c ****  */
 359:Libraries/ctrl_drv/i2c/I2Cdev.c **** int8_t I2Cdev_writeBitsW(uint8_t dev_addr, uint8_t reg_addr, uint8_t start_bit,
 360:Libraries/ctrl_drv/i2c/I2Cdev.c **** 		uint8_t len, uint16_t data)
 361:Libraries/ctrl_drv/i2c/I2Cdev.c **** {
 1106              		.loc 1 361 1 is_stmt 1 view -0
 1107              		.cfi_startproc
 1108              		@ args = 4, pretend = 0, frame = 8
 1109              		@ frame_needed = 0, uses_anonymous_args = 0
 1110              		.loc 1 361 1 is_stmt 0 view .LVU285
 1111 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1112              	.LCFI42:
 1113              		.cfi_def_cfa_offset 20
 1114              		.cfi_offset 4, -20
 1115              		.cfi_offset 5, -16
 1116              		.cfi_offset 6, -12
 1117              		.cfi_offset 7, -8
 1118              		.cfi_offset 14, -4
 1119 0002 83B0     		sub	sp, sp, #12
 1120              	.LCFI43:
 1121              		.cfi_def_cfa_offset 32
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 27


 1122 0004 0446     		mov	r4, r0
 1123 0006 0D46     		mov	r5, r1
 1124 0008 1646     		mov	r6, r2
 1125 000a 1F46     		mov	r7, r3
 362:Libraries/ctrl_drv/i2c/I2Cdev.c ****     uint16_t w;
 1126              		.loc 1 362 5 is_stmt 1 view .LVU286
 363:Libraries/ctrl_drv/i2c/I2Cdev.c ****     int8_t err;
 1127              		.loc 1 363 5 view .LVU287
 364:Libraries/ctrl_drv/i2c/I2Cdev.c **** 
 365:Libraries/ctrl_drv/i2c/I2Cdev.c ****     if ((err = I2Cdev_readWord(dev_addr, reg_addr, &w)) != 0) {
 1128              		.loc 1 365 5 view .LVU288
 1129              		.loc 1 365 16 is_stmt 0 view .LVU289
 1130 000c 0DF10602 		add	r2, sp, #6
 1131              	.LVL98:
 1132              		.loc 1 365 16 view .LVU290
 1133 0010 FFF7FEFF 		bl	I2Cdev_readWord
 1134              	.LVL99:
 1135              		.loc 1 365 8 view .LVU291
 1136 0014 08B9     		cbnz	r0, .L49
 1137              	.LVL100:
 1138              	.L47:
 366:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint16_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 367:Libraries/ctrl_drv/i2c/I2Cdev.c ****         data <<= (start_bit - len + 1); // shift data into correct position
 368:Libraries/ctrl_drv/i2c/I2Cdev.c ****         data &= mask; // zero all non-important bits in data
 369:Libraries/ctrl_drv/i2c/I2Cdev.c ****         w &= ~(mask); // zero all important bits in existing word
 370:Libraries/ctrl_drv/i2c/I2Cdev.c ****         w |= data; // combine data with existing word
 371:Libraries/ctrl_drv/i2c/I2Cdev.c ****         return I2Cdev_writeWord(dev_addr, reg_addr, w);
 372:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 373:Libraries/ctrl_drv/i2c/I2Cdev.c ****     else {
 374:Libraries/ctrl_drv/i2c/I2Cdev.c ****         return err;
 375:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 376:Libraries/ctrl_drv/i2c/I2Cdev.c **** }
 1139              		.loc 1 376 1 view .LVU292
 1140 0016 03B0     		add	sp, sp, #12
 1141              	.LCFI44:
 1142              		.cfi_remember_state
 1143              		.cfi_def_cfa_offset 20
 1144              		@ sp needed
 1145 0018 F0BD     		pop	{r4, r5, r6, r7, pc}
 1146              	.LVL101:
 1147              	.L49:
 1148              	.LCFI45:
 1149              		.cfi_restore_state
 1150              	.LBB9:
 366:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint16_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1151              		.loc 1 366 9 is_stmt 1 view .LVU293
 366:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint16_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1152              		.loc 1 366 29 is_stmt 0 view .LVU294
 1153 001a 4FF0010C 		mov	ip, #1
 1154 001e 0CFA07FC 		lsl	ip, ip, r7
 366:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint16_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1155              		.loc 1 366 37 view .LVU295
 1156 0022 0CF1FF3C 		add	ip, ip, #-1
 366:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint16_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1157              		.loc 1 366 56 view .LVU296
 1158 0026 F61B     		subs	r6, r6, r7
 366:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint16_t mask = ((1 << len) - 1) << (start_bit - len + 1);
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 28


 1159              		.loc 1 366 62 view .LVU297
 1160 0028 0136     		adds	r6, r6, #1
 366:Libraries/ctrl_drv/i2c/I2Cdev.c ****         uint16_t mask = ((1 << len) - 1) << (start_bit - len + 1);
 1161              		.loc 1 366 42 view .LVU298
 1162 002a 0CFA06FC 		lsl	ip, ip, r6
 1163              	.LVL102:
 367:Libraries/ctrl_drv/i2c/I2Cdev.c ****         data &= mask; // zero all non-important bits in data
 1164              		.loc 1 367 9 is_stmt 1 view .LVU299
 367:Libraries/ctrl_drv/i2c/I2Cdev.c ****         data &= mask; // zero all non-important bits in data
 1165              		.loc 1 367 14 is_stmt 0 view .LVU300
 1166 002e BDF82030 		ldrh	r3, [sp, #32]
 1167 0032 B340     		lsls	r3, r3, r6
 1168 0034 9BB2     		uxth	r3, r3
 1169              	.LVL103:
 368:Libraries/ctrl_drv/i2c/I2Cdev.c ****         w &= ~(mask); // zero all important bits in existing word
 1170              		.loc 1 368 9 is_stmt 1 view .LVU301
 368:Libraries/ctrl_drv/i2c/I2Cdev.c ****         w &= ~(mask); // zero all important bits in existing word
 1171              		.loc 1 368 14 is_stmt 0 view .LVU302
 1172 0036 0CEA0303 		and	r3, ip, r3
 1173              	.LVL104:
 369:Libraries/ctrl_drv/i2c/I2Cdev.c ****         w |= data; // combine data with existing word
 1174              		.loc 1 369 9 is_stmt 1 view .LVU303
 369:Libraries/ctrl_drv/i2c/I2Cdev.c ****         w |= data; // combine data with existing word
 1175              		.loc 1 369 11 is_stmt 0 view .LVU304
 1176 003a 6FEA0C02 		mvn	r2, ip
 1177 003e 12B2     		sxth	r2, r2
 1178 0040 BDF80610 		ldrh	r1, [sp, #6]
 1179 0044 0A40     		ands	r2, r2, r1
 1180 0046 92B2     		uxth	r2, r2
 1181 0048 ADF80620 		strh	r2, [sp, #6]	@ movhi
 370:Libraries/ctrl_drv/i2c/I2Cdev.c ****         return I2Cdev_writeWord(dev_addr, reg_addr, w);
 1182              		.loc 1 370 9 is_stmt 1 view .LVU305
 370:Libraries/ctrl_drv/i2c/I2Cdev.c ****         return I2Cdev_writeWord(dev_addr, reg_addr, w);
 1183              		.loc 1 370 11 is_stmt 0 view .LVU306
 1184 004c 1A43     		orrs	r2, r2, r3
 1185 004e ADF80620 		strh	r2, [sp, #6]	@ movhi
 371:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 1186              		.loc 1 371 9 is_stmt 1 view .LVU307
 371:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 1187              		.loc 1 371 16 is_stmt 0 view .LVU308
 1188 0052 2946     		mov	r1, r5
 1189 0054 2046     		mov	r0, r4
 1190 0056 FFF7FEFF 		bl	I2Cdev_writeWord
 1191              	.LVL105:
 371:Libraries/ctrl_drv/i2c/I2Cdev.c ****     }
 1192              		.loc 1 371 16 view .LVU309
 1193 005a DCE7     		b	.L47
 1194              	.LBE9:
 1195              		.cfi_endproc
 1196              	.LFE138:
 1198              		.text
 1199              	.Letext0:
 1200              		.file 2 "d:\\_environment\\arm-gnu-toolchain\\arm-none-eabi\\include\\machine\\_default_types.h"
 1201              		.file 3 "d:\\_environment\\arm-gnu-toolchain\\arm-none-eabi\\include\\sys\\_stdint.h"
 1202              		.file 4 "d:\\_environment\\arm-gnu-toolchain\\lib\\gcc\\arm-none-eabi\\12.3.1\\include\\stddef.h"
 1203              		.file 5 "Libraries/ctrl_drv/i2c/i2c_soft_stm32.h"
 1204              		.file 6 "d:\\_environment\\arm-gnu-toolchain\\arm-none-eabi\\include\\string.h"
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 29


 1205              		.file 7 "<built-in>"
ARM GAS  C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s 			page 30


DEFINED SYMBOLS
                            *ABS*:00000000 I2Cdev.c
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:19     .text.I2Cdev_readBytes:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:25     .text.I2Cdev_readBytes:00000000 I2Cdev_readBytes
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:87     .text.I2Cdev_readByte:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:93     .text.I2Cdev_readByte:00000000 I2Cdev_readByte
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:120    .text.I2Cdev_readWords:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:126    .text.I2Cdev_readWords:00000000 I2Cdev_readWords
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:252    .text.I2Cdev_readWord:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:258    .text.I2Cdev_readWord:00000000 I2Cdev_readWord
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:285    .text.I2Cdev_readBit:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:291    .text.I2Cdev_readBit:00000000 I2Cdev_readBit
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:333    .text.I2Cdev_readBits:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:339    .text.I2Cdev_readBits:00000000 I2Cdev_readBits
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:417    .text.I2Cdev_readBitW:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:423    .text.I2Cdev_readBitW:00000000 I2Cdev_readBitW
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:465    .text.I2Cdev_readBitsW:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:471    .text.I2Cdev_readBitsW:00000000 I2Cdev_readBitsW
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:551    .text.I2Cdev_writeBytes:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:557    .text.I2Cdev_writeBytes:00000000 I2Cdev_writeBytes
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:619    .text.I2Cdev_writeByte:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:625    .text.I2Cdev_writeByte:00000000 I2Cdev_writeByte
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:666    .text.I2Cdev_writeWord:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:672    .text.I2Cdev_writeWord:00000000 I2Cdev_writeWord
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:715    .text.I2Cdev_writeWords:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:721    .text.I2Cdev_writeWords:00000000 I2Cdev_writeWords
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:822    .text.I2Cdev_writeBit:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:828    .text.I2Cdev_writeBit:00000000 I2Cdev_writeBit
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:911    .text.I2Cdev_writeBitW:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:917    .text.I2Cdev_writeBitW:00000000 I2Cdev_writeBitW
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:992    .text.I2Cdev_writeBits:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:998    .text.I2Cdev_writeBits:00000000 I2Cdev_writeBits
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:1097   .text.I2Cdev_writeBitsW:00000000 $t
C:\Users\Mxuan\AppData\Local\Temp\cchWeP1z.s:1103   .text.I2Cdev_writeBitsW:00000000 I2Cdev_writeBitsW

UNDEFINED SYMBOLS
Soft_I2cMaster_TransmitAck
Soft_I2cMaster_ReceiveNack
memcpy
Soft_I2cMaster_TransmitNack
